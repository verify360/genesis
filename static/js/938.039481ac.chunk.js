"use strict";(self.webpackChunkverify360_react=self.webpackChunkverify360_react||[]).push([[938],{10549:(e,o,l)=>{l.d(o,{Z:()=>v});l(72791);var i=l(30439),d=l(5289),t=l(65661),n=l(39157),a=l(51691),s=l(97123),r=l(80184);const v=e=>{let{open:o,handleDailogClose:l,handleChangeAssignee:v}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.Z,{open:o,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialog-paper":{width:"500px",height:"auto"}},children:[(0,r.jsx)(t.Z,{id:"alert-dialog-title",children:(0,r.jsx)("h2",{children:"Confirmation"})}),(0,r.jsx)(n.Z,{children:(0,r.jsx)(a.Z,{id:"alert-dialog-description",sx:{fontSize:"0.85rem!important"},children:"Are you sure you want to proceed?"})}),(0,r.jsxs)(s.Z,{sx:{pr:4,pb:3},children:[(0,r.jsx)(i.Z,{onClick:l,color:"primary",variant:"contained",children:"Cancel"}),(0,r.jsx)(i.Z,{onClick:v,color:"primary",autoFocus:!0,variant:"contained",children:"Confirm"})]})]})})}},55938:(e,o,l)=>{l.r(o),l.d(o,{default:()=>E});var i=l(64554),d=l(39124),t=l(43896),n=l(72791),a=l(17563),s=l(82626),r=l(90977),v=l(93006),c=l(30439),u=l(81153),p=l(13239),m=l(61608),h=l(57012),g=l(74599),f=l(763),S=l(72426),y=l.n(S),k=l(89078),_=l(40071),O=l(16856),D=l(57689),b=l(25180),x=l(10549),N=l(80184);function G(e){var o,l,i,d,t,S,G,E,I,C,w,T,M,R,A,j,J,Z,Y,U,F,V,P,z,B,L,H,W;let{value:K}=e;const[X,q]=(0,n.useState)([]),[Q,$]=(0,n.useState)(!1),ee=(0,D.s0)(),[oe,le]=(0,n.useState)(!0),[ie,de]=(0,n.useState)([]),[te,ne]=(0,n.useState)({assignedTo:"",vendor:""}),[ae,se]=(0,n.useState)(y()().clone().subtract(30,"days").format("YYYY-MM-DD")),[re,ve]=(0,n.useState)(y()().clone().add(1,"day").format("YYYY-MM-DD")),[ce,ue]=(0,n.useState)(X),[pe,me]=(0,n.useState)({assignee:"",id:""}),[he,ge]=(0,n.useState)({vendor:"",id:"",vendorId:""}),[fe,Se]=(0,n.useState)([]),ye=null===(o=localStorage)||void 0===o?void 0:o.getItem("role"),ke=(null===(l=localStorage)||void 0===l?void 0:l.getItem("clients"))&&(0,f.isArray)(JSON.parse(null===(i=localStorage)||void 0===i?void 0:i.getItem("clients")))&&(0,f.compact)((0,f.map)(JSON.parse(null===(d=localStorage)||void 0===d?void 0:d.getItem("clients")),(e=>null===e||void 0===e?void 0:e.client_name))),_e=(null===(t=localStorage)||void 0===t?void 0:t.getItem("checks"))&&(0,f.isArray)(JSON.parse(null===(S=localStorage)||void 0===S?void 0:S.getItem("checks")))&&(0,f.map)(JSON.parse(null===(G=localStorage)||void 0===G?void 0:G.getItem("checks")),(e=>null===e||void 0===e?void 0:e.check_name)),Oe=ye===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)?(null===(E=localStorage)||void 0===E?void 0:E.getItem("checks"))&&(0,f.map)(null===(I=JSON.parse(null===(C=localStorage)||void 0===C?void 0:C.getItem("checks")))||void 0===I?void 0:I.checksdata,(e=>null===e||void 0===e?void 0:e.check_name)):[],De=(0,f.isEmpty)(_e)?null!==(w=localStorage)&&void 0!==w&&w.getItem("checks")&&(0,f.isObject)(JSON.parse(null===(T=localStorage)||void 0===T?void 0:T.getItem("checks")))&&null!==(M=JSON.parse(null===(R=localStorage)||void 0===R?void 0:R.getItem("checks")))&&void 0!==M&&M.allChecks?(0,f.filter)(X,(e=>{var o,l;return(null===e||void 0===e?void 0:e.assignedTo)===(null===(o=JSON.parse(null===(l=localStorage)||void 0===l?void 0:l.getItem("user")))||void 0===o?void 0:o.username)})):[]:(0,f.filter)(X,(e=>{var o,l;return(null===_e||void 0===_e?void 0:_e.includes(null===e||void 0===e?void 0:e.check_name))&&(null===e||void 0===e?void 0:e.assignedTo)===(null===(o=JSON.parse(null===(l=localStorage)||void 0===l?void 0:l.getItem("user")))||void 0===o?void 0:o.username)})),be=(0,f.map)((0,f.filter)(X,(e=>{var o,l;return(null===Oe||void 0===Oe?void 0:Oe.includes(null===e||void 0===e?void 0:e.check_name))&&(null===e||void 0===e?void 0:e.vendor)===(null===(o=JSON.parse(null===(l=localStorage)||void 0===l?void 0:l.getItem("user")))||void 0===o?void 0:o.username)})),(e=>"VENDOR"===(null===e||void 0===e?void 0:e.check_status)?{...e,check_status:"PENDING"}:"VENDOR_CLOSED"===(null===e||void 0===e?void 0:e.check_status)?{...e,check_status:"CLOSED"}:e)),xe=(0,f.isEmpty)(_e)||(0,f.isEmpty)(ke)?!(0,f.isEmpty)(ke)&&null!==(A=localStorage)&&void 0!==A&&A.getItem("checks")&&(0,f.isObject)(JSON.parse(null===(j=localStorage)||void 0===j?void 0:j.getItem("checks")))&&null!==(J=JSON.parse(null===(Z=localStorage)||void 0===Z?void 0:Z.getItem("checks")))&&void 0!==J&&J.allChecks?(0,f.filter)(X,(e=>null===ke||void 0===ke?void 0:ke.includes(null===e||void 0===e?void 0:e.client_name))):null!==(Y=localStorage)&&void 0!==Y&&Y.getItem("clients")&&null!==(U=JSON.parse(null===(F=localStorage)||void 0===F?void 0:F.getItem("clients"))[0])&&void 0!==U&&U.allClients&&!(0,f.isEmpty)(_e)?(0,f.filter)(X,(e=>null===_e||void 0===_e?void 0:_e.includes(null===e||void 0===e?void 0:e.check_name))):null!==(V=localStorage)&&void 0!==V&&V.getItem("clients")&&null!==(P=JSON.parse(null===(z=localStorage)||void 0===z?void 0:z.getItem("clients"))[0])&&void 0!==P&&P.allClients&&null!==(B=localStorage)&&void 0!==B&&B.getItem("checks")&&(0,f.isObject)(JSON.parse(null===(L=localStorage)||void 0===L?void 0:L.getItem("checks")))&&null!==(H=JSON.parse(null===(W=localStorage)||void 0===W?void 0:W.getItem("checks")))&&void 0!==H&&H.allChecks?X:[]:(0,f.filter)(X,(e=>(null===ke||void 0===ke?void 0:ke.includes(null===e||void 0===e?void 0:e.client_name))&&(null===_e||void 0===_e?void 0:_e.includes(null===e||void 0===e?void 0:e.check_name))));(0,n.useEffect)((()=>{const e=ye===(null===b.G7||void 0===b.G7?void 0:b.G7.STAFF)?De:ye===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)?0===K?(0,f.map)(be,(e=>({...e,check_status:"PENDING"}))):(0,f.map)(be,(e=>({...e,check_status:"VENDOR CLOSED"}))):(0,f.includes)(b._8,ye)?xe:X;ue(e)}),[X,ye]);const Ne=()=>{le(!0),fetch(ye===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)?"https://imranks.pythonanywhere.com/api/users/vendororderchecks/".concat(0===K?"open":"close","/").concat(ae,"/").concat(re):"https://imranks.pythonanywhere.com/api/users/orderchecks/".concat(0===K?"open":2===K?"close":3===K?"cancelled":"draft","/").concat(ae,"/").concat(re)).then((e=>e.json())).then((e=>{let o=null===JSON||void 0===JSON?void 0:JSON.parse(e.data);delete o.subRows,delete o.checks,q((0,f.reverse)(o))})).finally((()=>{le(!1)}))},Ge=[{name:"order_id",label:"ORDER #"},{name:"id",label:"CHECK #"},{name:"CandidateName",label:"CANDIDATE NAME"},{name:"client_name",label:"CLIENT",options:{display:ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)&&!(0,f.includes)(b._8,ye)}},{name:"check_name",label:"CHECKS"},{name:"date_created",label:"CREATED DATE",options:{display:ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR),filter:!1,customBodyRender:(e,o)=>e?y()(e).format("DD-MMM-YY"):"-"}},{name:"date_initiated",label:"INITIATED DATE",options:{filter:!1,display:1!==K&&!(0,f.includes)(b._8,ye),customBodyRender:(e,o)=>e?y()(e).format("DD-MMM-YY"):"-"}},{name:"tat",label:"TAT",options:{filter:!1,display:1!==K&&!(0,f.includes)(b._8,ye),customBodyRender:(e,o)=>e||14}},{name:"deadline",label:"DEADLINE",options:{filter:!1,display:1!==K&&!(0,f.includes)(b._8,ye),customBodyRender:(e,o)=>e?y()(e).format("DD-MMM-YY"):"-"}},{name:"date_created",label:"AGING",options:{filter:!1,display:ye===(null===b.G7||void 0===b.G7?void 0:b.G7.STAFF),customBodyRender:(e,o)=>{var l;const i=y()(y()(e).format("DD-MMM-YY"),"DD-MMM-YY"),d=1===K?y()(null===(l=(0,f.find)(X,(e=>(null===e||void 0===e?void 0:e.id)===o.rowData[1])))||void 0===l?void 0:l.date_closed):y()();return null===d||void 0===d?void 0:d.diff(i,"days")}}},{name:"followUp",label:"FOLLOW UP",options:{display:ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)&&1!==K&&!(0,f.includes)(b._8,ye),filter:!1,customBodyRender:(e,o)=>{var l,i,d;const t=(0,f.find)(X,{id:null===o||void 0===o?void 0:o.rowData[1]});return null!==t&&void 0!==t&&t.calllogs&&!(0,f.isEmpty)(null===t||void 0===t?void 0:t.calllogs)&&null!==(l=(0,f.find)((0,f.reverse)(null===JSON||void 0===JSON?void 0:JSON.parse(null===t||void 0===t?void 0:t.calllogs)),(e=>null===e||void 0===e?void 0:e.followUp)))&&void 0!==l&&l.followUp?null===(i=y()(null===(d=(0,f.find)((0,f.reverse)(null===JSON||void 0===JSON?void 0:JSON.parse(null===t||void 0===t?void 0:t.calllogs)),(e=>null===e||void 0===e?void 0:e.followUp)))||void 0===d?void 0:d.followUp))||void 0===i?void 0:i.format("DD-MMM-YY"):"-"}}},{name:"assignedTo",label:"ASSIGNED TO",options:{display:ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)&&1!==K&&!(0,f.includes)(b._8,ye),customBodyRender:(e,o)=>{if(0!==K||ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.ADMIN)&&ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.SUPERVISOR))return e;{var l;const i=(0,f.chain)(ie).filter((e=>{var l,i,d,t;return e.checks&&((0,f.isArray)(JSON.parse(e.checks))||(0,f.isArray)(null===(l=JSON.parse(e.checks))||void 0===l?void 0:l.checksdata))?null===(i=(0,f.isArray)(null===(d=JSON.parse(e.checks))||void 0===d?void 0:d.checksdata)?null===(t=JSON.parse(e.checks))||void 0===t?void 0:t.checksdata:JSON.parse(e.checks))||void 0===i?void 0:i.some((e=>e.check_name===o.rowData[4])):(0,f.isObject)(JSON.parse(null===e||void 0===e?void 0:e.checks))&&e})).value();return(0,N.jsx)(a.Z,{id:"assignedTo",name:"assignedTo",value:((null===te||void 0===te?void 0:te.cellIndex)===(null===o||void 0===o?void 0:o.rowIndex)?null===te||void 0===te?void 0:te.assignedTo:e)||e,sx:{fontSize:"0.7rem","& .MuiSelect-select":{padding:"10px 15px !important"}},onChange:e=>{var l;$(!0),me({assignee:null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value,id:o.rowData[1]})},style:{width:"100%"},MenuProps:{PaperProps:{style:{maxHeight:200,width:160}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},children:(0,f.isEmpty)((0,f.filter)(i,(e=>(null===e||void 0===e?void 0:e.role)!=(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR))))?(0,N.jsx)(s.Z,{sx:{fontSize:"0.8rem"},children:"No staff is found"}):null===(l=(0,f.filter)(i,(e=>(null===e||void 0===e?void 0:e.role)!=(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR))))||void 0===l?void 0:l.map(((e,o)=>(0,N.jsx)(s.Z,{value:e.username,sx:{fontSize:"0.7rem"},children:e.username},o)))},null===o||void 0===o?void 0:o.rowIndex)}}}},{name:"vendor",label:"VENDOR",options:{display:ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)&&1!==K&&!(0,f.includes)(b._8,ye),customBodyRender:(e,o)=>{if(0!==K||ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.ADMIN)&&ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.SUPERVISOR)&&ye!==(null===b.G7||void 0===b.G7?void 0:b.G7.STAFF))return e;{var l;const i=(0,f.chain)(ie).filter((e=>{var l,i,d,t;return e.checks&&((0,f.isArray)(JSON.parse(e.checks))||(0,f.isArray)(null===(l=JSON.parse(e.checks))||void 0===l?void 0:l.checksdata))?null===(i=(0,f.isArray)(null===(d=JSON.parse(e.checks))||void 0===d?void 0:d.checksdata)?null===(t=JSON.parse(e.checks))||void 0===t?void 0:t.checksdata:JSON.parse(e.checks))||void 0===i?void 0:i.some((e=>e.check_name===o.rowData[4])):(0,f.isObject)(JSON.parse(null===e||void 0===e?void 0:e.checks))&&e})).value();return(0,N.jsx)(a.Z,{id:"vendor",name:"vendor",disabled:(0,f.isEmpty)(o.rowData[11]),value:((null===te||void 0===te?void 0:te.cellIndex)===(null===o||void 0===o?void 0:o.rowIndex)?null===he||void 0===he?void 0:he.vendor:e)||e,sx:{fontSize:"0.7rem","& .MuiSelect-select":{padding:"10px 15px !important"}},onChange:e=>{var l,i,d;ge({vendor:null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value,id:o.rowData[1],vendorId:null===(i=(0,f.find)(ie,{username:null===e||void 0===e||null===(d=e.target)||void 0===d?void 0:d.value}))||void 0===i?void 0:i.id}),$(!0)},style:{width:"100%"},MenuProps:{PaperProps:{style:{maxHeight:200,width:160}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},children:(0,f.isEmpty)((0,f.filter)(i,{role:"vendor"}))?(0,N.jsx)(s.Z,{sx:{fontSize:"0.8rem"},children:"No vendor is found"}):null===(l=(0,f.filter)(i,{role:"vendor"}))||void 0===l?void 0:l.map(((e,o)=>(0,N.jsx)(s.Z,{value:e.username,sx:{fontSize:"0.7rem"},children:null===e||void 0===e?void 0:e.username},o)))},null===o||void 0===o?void 0:o.rowIndex)}},setCellProps:()=>({style:{width:ye===(null===b.G7||void 0===b.G7?void 0:b.G7.STAFF)?"150px":"110px"}})}},{name:"check_status",label:"STATUS",options:{customBodyRender:(e,o)=>{var l;const i=y()(),d=y()(o.rowData[8]),t=null===d||void 0===d?void 0:d.diff(i,"days");let n;return n=2===K?"green":t<0?"red":0===t?"yellow":"orange",(0,N.jsxs)("span",{style:{color:null===(l=(0,f.find)(b.XZ,{label:e}))||void 0===l?void 0:l.color,display:"flex",alignItems:"center",gap:6},children:[e," ",(0,N.jsx)(_.hzX,{fill:n,size:21})]})}}},{name:"action",label:"ACTION",options:{filter:!1,customBodyRender:(e,o)=>{const l="CANCELLED"===o.rowData[13];return(0,N.jsx)(r.Z,{sx:{cursor:l?"not-allowed":"pointer"},onClick:()=>{l||ee("/orderchecks/checkDetails/"+o.rowData[1])},children:(0,N.jsx)(O.eDK,{size:23,color:"#524f4f"})})}}}];(0,n.useEffect)((()=>{Ne(),(async()=>{let e=await g.Z.ListUsers();if(200===(null===e||void 0===e?void 0:e.status)){let o=null===JSON||void 0===JSON?void 0:JSON.parse(e.data.data);de((0,f.filter)(o,(e=>"staff"===(null===e||void 0===e?void 0:e.role)||"supervisor"===(null===e||void 0===e?void 0:e.role)||"vendor"===(null===e||void 0===e?void 0:e.role))))}else console.error("Unexpected response status:",null===e||void 0===e?void 0:e.status)})()}),[]);const Ee={filterOptions:"fullWidth",selectableRows:(ye===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)||0===K)&&"multiple",print:!1,selectToolbarPlacement:"none",onRowSelectionChange:(e,o)=>{const l=o.map((e=>{var o;const l=e.dataIndex;return null===(o=ce[l])||void 0===o?void 0:o.id}));Se((0,f.concat)(fe,l))},rowsPerPageOptions:[30,50,100],rowsPerPage:30,viewColumns:!1,downloadOptions:{filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}},customFilterDialogFooter:()=>(0,N.jsxs)("div",{style:{paddingTop:"3rem",width:"100%",display:"flex",justifyContent:"space-between",gap:18},children:[(0,N.jsx)(v.Z,{label:"Start Date",type:"date",value:ae,fullWidth:!0,onChange:e=>se(e.target.value),InputLabelProps:{shrink:!0}}),(0,N.jsx)(v.Z,{label:"End Date",type:"date",value:re,fullWidth:!0,onChange:e=>ve(e.target.value),InputLabelProps:{shrink:!0}}),(0,N.jsx)(c.Z,{sx:{mt:10,pr:4,pl:4},onClick:Ne,variant:"contained",children:"Apply"})]})},Ie=()=>{$(!1)};return(0,N.jsxs)(u.ZP,{item:!0,fullwidth:"true",width:"100%",children:[oe?(0,N.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,N.jsx)(p.Z,{color:"inherit",size:20})}):(0,N.jsx)(h.Z,{theme:(0,m.Z)({components:{MUIDataTable:{styleOverrides:{root:{boxShadow:"none",backgroundColor:"#FFF"}}},MUIDataTableHeadCell:{styleOverrides:{root:{backgroundColor:"#2152a1",color:"#fff",border:"none","&:first-of-type":{borderTopLeftRadius:"1rem"},"&:last-of-type":{borderTopRightRadius:"1rem"}},toolButton:{fontWeight:"bold",fontSize:"0.7rem"}}},MUIDataTableSelectCell:{styleOverrides:{headerCell:{border:"none",borderTopLeftRadius:"1rem",backgroundColor:"#2152a1","& .MuiCheckbox-root":{color:"#fff"}}}},MuiToolbar:{styleOverrides:{root:{minHeight:"30px!important"}}},MUIDataTableBodyRow:{styleOverrides:{root:{"&:nth-of-type(even)":{backgroundColor:"#EEF2FF"},"&:nth-of-type(odd)":{backgroundColor:"#FFF"},"& td":{textAlign:"left",border:"none"},marginBottom:"10px"}}},MuiTableCell:{styleOverrides:{root:{padding:ye===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)||0===K?"4px !important":"8px !important","&:first-of-type":{paddingLeft:ye===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)||0===K?"0":"1rem !important"}}}},MUIDataTableBodyRow:{styleOverrides:{root:{"&:nth-of-type(even)":{backgroundColor:"#dde1e9"}}}},MUIDataTableBodyCell:{styleOverrides:{root:{fontSize:"0.7rem"}}}}}),children:(0,N.jsx)(k.ZP,{title:"",data:ce,columns:Ge,options:{...Ee},style:{width:"800px",fontSize:"0.675rem"}})}),Q&&(0,N.jsx)(x.Z,{open:Q,handleDailogClose:Ie,handleChangeAssignee:()=>(0,f.isEmpty)(null===pe||void 0===pe?void 0:pe.assignee)?!(0,f.isEmpty)(null===he||void 0===he?void 0:he.vendor)&&((e,o,l)=>{const i=(0,f.find)(X,(e=>(null===e||void 0===e?void 0:e.id)===o)),d=(0,f.filter)(ye===(null===b.G7||void 0===b.G7?void 0:b.G7.STAFF)?De:ye===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)?be:X,(e=>(null===e||void 0===e?void 0:e.assignedTo)&&(0,f.includes)(fe,null===e||void 0===e?void 0:e.id))),t=(0,f.find)(ie,(e=>(null===e||void 0===e?void 0:e.id)===parseInt(l))),n=null!==t&&void 0!==t&&t.checks?(0,f.map)((0,f.filter)(d,(e=>{var o;return(0,f.includes)((0,f.map)(null===(o=JSON.parse(null===t||void 0===t?void 0:t.checks))||void 0===o?void 0:o.checksdata,(e=>null===e||void 0===e?void 0:e.check_name)),null===e||void 0===e?void 0:e.check_name)})),(e=>null===e||void 0===e?void 0:e.id)):[];let a={data:{check_status:"VENDOR",assignedTo:null===i||void 0===i?void 0:i.assignedTo,internalnotes:i.internalnotes,notes:i.notes,logs:i.logs,order_id:i.order_id,client_id:null===i||void 0===i?void 0:i.client_id,check_name:null===i||void 0===i?void 0:i.check_name,docUpload:null===i||void 0===i?void 0:i.docUpload,date_initiated:null===i||void 0===i?void 0:i.date_initiated,deadline:null===i||void 0===i?void 0:i.deadline,vendor_assigned:y()(new Date).format("YYYY-MM-DD hh:mm:ss"),vendor:e},id:o},s={table_name:"order_checks",field_to_update:"vendor",new_value:e,table_id:n,column_to_match:"id"},r={table_name:"order_checks",field_to_update:"check_status",new_value:"VENDOR",table_id:n,column_to_match:"id"};if((0,f.isEmpty)(fe))try{var v;(0,f.isEmpty)(null===a||void 0===a||null===(v=a.data)||void 0===v?void 0:v.deadline)&&(a.data=(0,f.omit)(a.data,"deadline"));const e=g.Z.EditOrderchecks(a);null===e||void 0===e||e.then((e=>{200===(null===e||void 0===e?void 0:e.status)&&((0,b.OD)("vendor assigned successfully"),Ne(),ge({vendor:"",id:"",vendorId:""}),Ie())}))}catch(c){console.error("error",c)}else try{const e=g.Z.UpdateMultipleAssignee(s);null===e||void 0===e||e.then((e=>{200===e.status&&g.Z.UpdateMultipleAssignee(r).then((e=>{200===(null===e||void 0===e?void 0:e.status)&&((0,b.OD)("vendor assigned successfully"),Ne(),ge({vendor:"",id:"",vendorId:""}),Se([]),Ie())}))}))}catch(c){console.error("error",c)}})(null===he||void 0===he?void 0:he.vendor,null===he||void 0===he?void 0:he.id,null===he||void 0===he?void 0:he.vendorId):((e,o)=>{var l;const i=(0,f.find)(X,(e=>(null===e||void 0===e?void 0:e.id)===o)),d=(0,f.map)((0,f.filter)(X,(e=>(null===e||void 0===e?void 0:e.order_id)===(null===i||void 0===i?void 0:i.order_id))),(e=>null===e||void 0===e?void 0:e.check_status)),t=!((0,f.isEmpty)(d)||(0,f.includes)(d,"INITIATED")||(0,f.includes)(d,"DRAFT"))&&(0,f.every)(d,(e=>{var o;return e===(null===(o=(0,f.find)(b.XZ,{label:e}))||void 0===o?void 0:o.label)}));let n={table_name:"orders",field_to_update:"status",new_value:"PENDING",table_id:null===i||void 0===i?void 0:i.order_id};const a=null===JSON||void 0===JSON?void 0:JSON.parse(null===i||void 0===i?void 0:i.logs),s={check_status:"",assignedTo:e,internalnotes:"",notes:"",sentence:null!==i&&void 0!==i&&i.assignedTo?"Assignee was updated ".concat(null===i||void 0===i?void 0:i.assignedTo," to ").concat(e):"Assignee was updated to ".concat(e),updatedAt:null===(l=y()())||void 0===l?void 0:l.format("MMMM DD, YYYY hh:mm a"),docUpload:[]},r=null!==a?JSON.stringify([s,...a],null,2):JSON.stringify([s]);let v={data:{check_status:"INITIATED",assignedTo:e,internalnotes:i.internalnotes,notes:i.notes,logs:r,order_id:i.order_id,client_id:null===i||void 0===i?void 0:i.client_id,check_name:null===i||void 0===i?void 0:i.check_name,docUpload:null===i||void 0===i?void 0:i.docUpload,date_initiated:y()().format("YYYY-MM-DD"),date_closed:null,deadline:y()().add(null!==i&&void 0!==i&&i.tat?parseInt(null===i||void 0===i?void 0:i.tat)+1:14,"days").format("YYYY-MM-DD hh:mm:ss")},id:o};if((0,f.isEmpty)(fe))try{var c;(0,f.isEmpty)(s)?v.data=(0,f.omit)(v.data,"logs"):(0,f.isEmpty)(null===v||void 0===v||null===(c=v.data)||void 0===c?void 0:c.deadline)&&(v.data=(0,f.omit)(v.data,"deadline")),g.Z.EditOrderchecks(v).then((e=>{200===e.status&&(ne({assignedTo:""}),t&&g.Z.UpdateData(n),(0,b.OD)("Check updated successfully"),Ie(),Ne())}))}catch(u){console.error("Error fetching checks:",u),Ie()}else{let o={table_name:"order_checks",field_to_update:"assignedTo",new_value:e,table_id:fe,column_to_match:"id"},l={table_name:"order_checks",field_to_update:"check_status",new_value:"INITIATED",table_id:fe,column_to_match:"id"},d={table_name:"order_checks",field_to_update:"deadline",new_value:y()().add(null!==i&&void 0!==i&&i.tat?null===i||void 0===i?void 0:i.tat:14,"days").format("YYYY-MM-DD hh:mm:ss"),table_id:fe,column_to_match:"id"};try{g.Z.UpdateMultipleAssignee(o).then((e=>{200===e.status&&g.Z.UpdateMultipleAssignee(l).then((e=>{200===(null===e||void 0===e?void 0:e.status)&&(g.Z.UpdateMultipleAssignee(d),me({assignee:"",id:""}),Ie(),(0,b.OD)("Assignee updated successfully"),Se([]),Ne())}))}))}catch(u){Ie(),console.error("Error fetching checks:",u)}}})(null===pe||void 0===pe?void 0:pe.assignee,null===pe||void 0===pe?void 0:pe.id)})]})}const E=()=>{var e;const[o,l]=(0,n.useState)(0),a=null===(e=localStorage)||void 0===e?void 0:e.getItem("role");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.Z,{sx:{width:"100%",borderRadius:2},children:(0,N.jsxs)(d.Z,{value:o,onChange:(e,o)=>{l(o)},"aria-label":"basic tabs example",children:[(0,N.jsx)(t.Z,{label:"Open Checks",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2}}),(0,N.jsx)(t.Z,{label:"Draft Checks",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2,display:a===(null===b.G7||void 0===b.G7?void 0:b.G7.VENDOR)?"none":"block"}}),(0,N.jsx)(t.Z,{label:"Closed Checks",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2}}),(0,N.jsx)(t.Z,{label:"Cancel Check",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2,display:a===(null===b.G7||void 0===b.G7?void 0:b.G7.ADMIN)?"block":"none"}})]})}),(0,N.jsxs)(i.Z,{sx:{width:"100%",mt:1},children:[0===o&&(0,N.jsx)(G,{value:o}),1===o&&(0,N.jsx)(G,{value:o}),2===o&&(0,N.jsx)(G,{value:o}),3===o&&(0,N.jsx)(G,{value:o})]})]})}}}]);
//# sourceMappingURL=938.039481ac.chunk.js.map