"use strict";(self.webpackChunkverify360_react=self.webpackChunkverify360_react||[]).push([[3],{49003:(e,l,a)=>{a.r(l),a.d(l,{default:()=>_});var i=a(72791),d=a(2782),t=a(57621),n=a(81153),o=a(17563),s=a(82626),r=a(50168),c=a(73766),u=a(93006),v=a(30439),p=a(64554),h=a(74599),m=a(98438),g=a(59721),f=a(70065),x=a(92506),b=a(763),k=a(793),S=a(25180),y=a(81724),C=(a(28378),a(30947)),j=a(80184);const N={open:!1,field:""},Z=()=>{var e;const[l,a]=(0,i.useState)(!0),[d,Z]=(0,i.useState)(N),[_,I]=(0,i.useState)([]),[A,E]=(0,i.useState)({}),[F,O]=(0,i.useState)([]),[M,L]=(0,i.useState)(0),[P,w]=(0,i.useState)([]),[B,J]=(0,i.useState)(""),[T,D]=(0,i.useState)([]),[V,G]=(0,i.useState)(0),[R,q]=(0,i.useState)([]),H=JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user")),K=localStorage.getItem("clients")?JSON.parse(localStorage.getItem("clients")):"";(0,i.useEffect)((()=>{var e;const l=null===(e=K[0])||void 0===e?void 0:e.allClient;K&&(l||(null===H||void 0===H?void 0:H.role)===(null===S.G7||void 0===S.G7?void 0:S.G7.ADMIN)?(()=>{try{h.Z.ListClients().then((e=>{O(JSON.parse(e.data.data))}))}catch(e){console.error("Error fetching data:",e)}})():O(K))}),[]),(0,i.useEffect)((()=>{if((0,b.isEmpty)(A)||(0,b.isEmpty)(null===A||void 0===A?void 0:A.check_apis))q([]);else{const e=(0,b.map)(JSON.parse(null===A||void 0===A?void 0:A.check_apis),(e=>({label:e,value:e})));q(e)}}),[A]);const z=(0,i.useCallback)((e=>{try{h.Z.ListPackagesByClient(e).then((e=>{w(JSON.parse(e.data.data))}))}catch(l){console.error("Error fetching data:",l)}}),[]),Q=y.Ry({check_name:y.Z_("Enter check Name").required("check Name is required"),category:y.Z_("Enter category").required("category is required")}),U=(0,x.TA)({initialValues:{client_id:"",check_name:"",category:"",check_fields:"",active:1,isAddressVerify:!1},validationSchema:Q,onSubmit:e=>{let l=JSON.stringify(_);e.check_fields=l;h.Z.CreateCheck({data:e})}});(0,i.useEffect)((()=>{localStorage.setItem("AllFields",JSON.stringify([..._]))}),[_]);const W=e=>{var l,i,d,t;if((0,b.includes)(["Name","Address"],null===e||void 0===e?void 0:e.draggableId))(e=>{let l=[];switch(e){case"Name":default:l=[{label:"First Name",value:"",fieldName:"Text Field"},{label:"Last Name",value:"",fieldName:"Text Field"}];break;case"Address":l=[{label:"Address Line 1",value:"",fieldName:"Text Field"},{label:"Address Line 2",value:"",fieldName:"Text Field"},{label:"City",value:"",values:[""],fieldName:"Select",options:["Vadodara","Surat","Ahmedabad","Rajkot"]},{label:"State",value:"",values:[""],fieldName:"Select",options:["Gujarat","Rajasthan","Maharashtra","Kerala"]},{label:"Area",value:"",fieldName:"Text Field"},{label:"Zip Code",value:"",fieldName:"Text Field"}]}I((0,b.concat)(_,l))})(null===e||void 0===e?void 0:e.draggableId);else if((null===e||void 0===e||null===(l=e.source)||void 0===l?void 0:l.droppableId)===(null===e||void 0===e||null===(i=e.destination)||void 0===i?void 0:i.droppableId)&&"dropArea"===(null===e||void 0===e||null===(d=e.source)||void 0===d?void 0:d.droppableId)){var n,o;const l=null===e||void 0===e||null===(n=e.source)||void 0===n?void 0:n.index,a=null===e||void 0===e||null===(o=e.destination)||void 0===o?void 0:o.index,i=[..._];i.splice(a,0,i.splice(l,1)[0]),l!==a&&I([...i])}else"dropArea"===(null===e||void 0===e||null===(t=e.destination)||void 0===t?void 0:t.droppableId)&&(Z({index:-1,open:!0,field:e.draggableId}),a(!1))},X=(0,i.useCallback)((e=>{try{h.Z.ListChecksByClientPackage(M,e).then((e=>{let l=JSON.parse(e.data.data);D(l)}))}catch(l){console.error("Error fetching data:",l)}}),[M]);(0,i.useEffect)((()=>{(0,b.includes)(S._8,null===H||void 0===H?void 0:H.role)&&!(0,b.isEmpty)(F)&&(L(null===H||void 0===H?void 0:H.client_id),z(null===H||void 0===H?void 0:H.client_id))}),[F,null===H||void 0===H?void 0:H.role,null===H||void 0===H?void 0:H.client_id]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(k.Z5,{onDragEnd:e=>W(e),children:[(0,j.jsxs)(t.Z,{sx:{display:"flex",p:4},children:[(0,j.jsx)(f.Z,{}),(0,j.jsx)(k.bK,{droppableId:"dropArea",children:e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.Z,{component:"main",sx:{flexGrow:1,p:3},children:(0,j.jsx)("div",{...e.droppableProps,...e.dragHandleProps,ref:e.innerRef,style:{minHeight:"100vh",backgroundColor:"#fff"},children:(0,b.isEmpty)(_)?"Drag Here":null===_||void 0===_?void 0:_.map(((e,l)=>(0,j.jsx)(g.Z,{field:e,setAllFields:I,setModal:Z,i:l},Math.random())))})}),e.placeholder]})},"dropArea"),(0,j.jsxs)(n.ZP,{container:!0,direction:"column",width:"200px",style:{backgroundColor:"#B7C0D0",padding:"5px"},children:[(0,j.jsxs)("form",{onSubmit:U.handleSubmit,children:[(0,j.jsx)("div",{id:"clientLabel",style:{paddingTop:"0.3rem"},children:"Select Client"}),(0,j.jsx)(o.Z,{name:"client_id",id:"client_id",label:"Select Client",labelId:"clientLabel",className:"selectfield",value:M,sx:{"&.MuiInputBase-root, .MuiOutlinedInput-input":{padding:"3px !important"}},disabled:(0,b.includes)(S._8,null===H||void 0===H?void 0:H.role),style:{width:"90%"},onChange:e=>{L(e.target.value),z(e.target.value)},onBlur:U.handleBlur,children:F.map(((e,l)=>(0,j.jsx)(s.Z,{value:e.id,children:e.client_name},Math.random())))}),(0,j.jsx)(r.Z,{id:"clientLabel",children:"Select Package"}),(0,j.jsx)(o.Z,{name:"package_id",id:"package_id",label:"Select Package",labelId:"packageLable",className:"selectfield",style:{width:"90%"},sx:{"&.MuiInputBase-root, .MuiOutlinedInput-input":{padding:"3px !important"}},value:B,onChange:e=>{var l,a;J(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value),X(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)},onBlur:U.handleBlur,children:(0,b.isEmpty)(P)?(0,j.jsx)(s.Z,{children:"No Packages"},Math.random()):P.map(((e,l)=>(0,j.jsx)(s.Z,{value:null===e||void 0===e?void 0:e.package_name,children:null===e||void 0===e?void 0:e.package_name},Math.random())))}),(0,j.jsx)("div",{id:"categoryLabel",style:{paddingTop:"0.3rem"},children:"Select Verification List"}),(0,j.jsx)(c.Z,{multiple:!0,disabled:(0,b.isEmpty)(B)||(0,b.isEmpty)(A),style:{width:"90%"},sx:{padding:"0 !important",backgroundColor:"#fff",margin:"5px 5px",width:"163px","&.MuiInputBase-root, .MuiOutlinedInput-input":{padding:"3px !important"},"& .MuiOutlinedInput-root":{paddingRight:"52px !important",padding:"6px !important"}},id:"verification",options:[{label:"Addhar Card",value:"Addhar Card"},{label:"Pan Card",value:"Pan Card"},{label:"Passport",value:"Passport"},{label:"Voter Id",value:"Voter Id"},{label:"Driving License",value:"Driving License"}],getOptionLabel:e=>e.label,value:R,onChange:(e,l)=>{var a;(0,b.includes)((0,b.map)(R,"value"),null===(a=(0,b.last)(l))||void 0===a?void 0:a.value)||q(l)},renderInput:e=>(0,j.jsx)(u.Z,{...e,variant:"outlined"})})]}),(0,j.jsx)(v.Z,{variant:"contained",name:"Submit",className:"button",type:"submit",onClick:()=>{if(null!==A&&void 0!==A&&A.id){let l={data:{check_fields:JSON.stringify(_),check_apis:JSON.stringify((0,b.map)(R,"value")),check_id:null===A||void 0===A?void 0:A.id,check_name:null===A||void 0===A?void 0:A.check_name,package_name:B},id:null===A||void 0===A?void 0:A.id};try{let e=null===h.Z||void 0===h.Z?void 0:h.Z.EditClientChecks(l);null===e||void 0===e||e.then((e=>{200===(null===e||void 0===e?void 0:e.status)&&((0,S.OD)("Form submitted successfully"),I([]),q([]),L(0),J(""),D([]))}))}catch(e){console.error(e)}}else(0,S.OD)("Please Select the check First.","error")},disabled:(0,b.isEmpty)(A),children:"Submit"})]}),(0,j.jsx)(n.ZP,{container:!0,direction:"column",width:"200px",style:{backgroundColor:"#fff",padding:"0 5px 5px 5px"},children:(0,j.jsx)(m.Z,{client:M,selectedCheck:A,setSelectedCheck:E,setAllFields:I,checks:T,setCheckId:G},Math.random())})]}),(null===d||void 0===d?void 0:d.open)&&(0,j.jsx)(C.Z,{modal:d,setModal:Z,setAllFields:I,allFields:_})]})})};a(16579);const _=()=>{const e=window.location.pathname;return(0,j.jsx)(j.Fragment,{children:"/master/checks"===e?(0,j.jsx)(d.Z,{}):(0,j.jsx)(Z,{})})}}}]);
//# sourceMappingURL=3.8e1d2c21.chunk.js.map