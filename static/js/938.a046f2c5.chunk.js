"use strict";(self.webpackChunkverify360_react=self.webpackChunkverify360_react||[]).push([[938],{10549:(e,l,o)=>{o.d(l,{Z:()=>v});o(72791);var i=o(30439),d=o(5289),t=o(65661),n=o(39157),a=o(51691),s=o(97123),r=o(80184);const v=e=>{let{open:l,handleDailogClose:o,handleChangeAssignee:v}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.Z,{open:l,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialog-paper":{width:"500px",height:"auto"}},children:[(0,r.jsx)(t.Z,{id:"alert-dialog-title",children:(0,r.jsx)("h2",{children:"Confirmation"})}),(0,r.jsx)(n.Z,{children:(0,r.jsx)(a.Z,{id:"alert-dialog-description",sx:{fontSize:"0.85rem!important"},children:"Are you sure you want to proceed?"})}),(0,r.jsxs)(s.Z,{sx:{pr:4,pb:3},children:[(0,r.jsx)(i.Z,{onClick:o,color:"primary",variant:"contained",children:"Cancel"}),(0,r.jsx)(i.Z,{onClick:v,color:"primary",autoFocus:!0,variant:"contained",children:"Confirm"})]})]})})}},55938:(e,l,o)=>{o.r(l),o.d(l,{default:()=>G});var i=o(64554),d=o(39124),t=o(43896),n=o(72791),a=o(17563),s=o(82626),r=o(93006),v=o(30439),c=o(81153),u=o(13239),p=o(61608),m=o(57012),h=o(74599),g=o(763),f=o(72426),y=o.n(f),S=o(89078),k=o(40071),_=o(16856),O=o(57689),D=o(25180),b=o(10549),x=o(80184);function N(e){var l,o,i,d,t,f,N,G,I,E,C,w,T,M,R,j,A,J,Z,Y,U,F,V,P,z,B,L,H;let{value:W}=e;const[K,X]=(0,n.useState)([]),[q,Q]=(0,n.useState)(!1),$=(0,O.s0)(),[ee,le]=(0,n.useState)(!0),[oe,ie]=(0,n.useState)([]),[de,te]=(0,n.useState)({assignedTo:"",vendor:""}),[ne,ae]=(0,n.useState)(y()().clone().subtract(30,"days").format("YYYY-MM-DD")),[se,re]=(0,n.useState)(y()().clone().add(1,"day").format("YYYY-MM-DD")),[ve,ce]=(0,n.useState)(K),[ue,pe]=(0,n.useState)({assignee:"",id:""}),[me,he]=(0,n.useState)({vendor:"",id:"",vendorId:""}),[ge,fe]=(0,n.useState)([]),ye=null===(l=localStorage)||void 0===l?void 0:l.getItem("role"),Se=(null===(o=localStorage)||void 0===o?void 0:o.getItem("clients"))&&(0,g.isArray)(JSON.parse(null===(i=localStorage)||void 0===i?void 0:i.getItem("clients")))&&(0,g.compact)((0,g.map)(JSON.parse(null===(d=localStorage)||void 0===d?void 0:d.getItem("clients")),(e=>null===e||void 0===e?void 0:e.client_name))),ke=(null===(t=localStorage)||void 0===t?void 0:t.getItem("checks"))&&(0,g.isArray)(JSON.parse(null===(f=localStorage)||void 0===f?void 0:f.getItem("checks")))&&(0,g.map)(JSON.parse(null===(N=localStorage)||void 0===N?void 0:N.getItem("checks")),(e=>null===e||void 0===e?void 0:e.check_name)),_e=ye===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)?(null===(G=localStorage)||void 0===G?void 0:G.getItem("checks"))&&(0,g.map)(null===(I=JSON.parse(null===(E=localStorage)||void 0===E?void 0:E.getItem("checks")))||void 0===I?void 0:I.checksdata,(e=>null===e||void 0===e?void 0:e.check_name)):[],Oe=(0,g.isEmpty)(ke)?null!==(C=localStorage)&&void 0!==C&&C.getItem("checks")&&(0,g.isObject)(JSON.parse(null===(w=localStorage)||void 0===w?void 0:w.getItem("checks")))&&null!==(T=JSON.parse(null===(M=localStorage)||void 0===M?void 0:M.getItem("checks")))&&void 0!==T&&T.allChecks?(0,g.filter)(K,(e=>{var l,o;return(null===e||void 0===e?void 0:e.assignedTo)===(null===(l=JSON.parse(null===(o=localStorage)||void 0===o?void 0:o.getItem("user")))||void 0===l?void 0:l.username)})):[]:(0,g.filter)(K,(e=>{var l,o;return(null===ke||void 0===ke?void 0:ke.includes(null===e||void 0===e?void 0:e.check_name))&&(null===e||void 0===e?void 0:e.assignedTo)===(null===(l=JSON.parse(null===(o=localStorage)||void 0===o?void 0:o.getItem("user")))||void 0===l?void 0:l.username)})),De=(0,g.map)((0,g.filter)(K,(e=>{var l,o;return(null===_e||void 0===_e?void 0:_e.includes(null===e||void 0===e?void 0:e.check_name))&&(null===e||void 0===e?void 0:e.vendor)===(null===(l=JSON.parse(null===(o=localStorage)||void 0===o?void 0:o.getItem("user")))||void 0===l?void 0:l.username)})),(e=>"VENDOR"===(null===e||void 0===e?void 0:e.check_status)?{...e,check_status:"PENDING"}:"VENDOR_CLOSED"===(null===e||void 0===e?void 0:e.check_status)?{...e,check_status:"CLOSED"}:e)),be=(0,g.isEmpty)(ke)||(0,g.isEmpty)(Se)?!(0,g.isEmpty)(Se)&&null!==(R=localStorage)&&void 0!==R&&R.getItem("checks")&&(0,g.isObject)(JSON.parse(null===(j=localStorage)||void 0===j?void 0:j.getItem("checks")))&&null!==(A=JSON.parse(null===(J=localStorage)||void 0===J?void 0:J.getItem("checks")))&&void 0!==A&&A.allChecks?(0,g.filter)(K,(e=>null===Se||void 0===Se?void 0:Se.includes(null===e||void 0===e?void 0:e.client_name))):null!==(Z=localStorage)&&void 0!==Z&&Z.getItem("clients")&&null!==(Y=JSON.parse(null===(U=localStorage)||void 0===U?void 0:U.getItem("clients"))[0])&&void 0!==Y&&Y.allClients&&!(0,g.isEmpty)(ke)?(0,g.filter)(K,(e=>null===ke||void 0===ke?void 0:ke.includes(null===e||void 0===e?void 0:e.check_name))):null!==(F=localStorage)&&void 0!==F&&F.getItem("clients")&&null!==(V=JSON.parse(null===(P=localStorage)||void 0===P?void 0:P.getItem("clients"))[0])&&void 0!==V&&V.allClients&&null!==(z=localStorage)&&void 0!==z&&z.getItem("checks")&&(0,g.isObject)(JSON.parse(null===(B=localStorage)||void 0===B?void 0:B.getItem("checks")))&&null!==(L=JSON.parse(null===(H=localStorage)||void 0===H?void 0:H.getItem("checks")))&&void 0!==L&&L.allChecks?K:[]:(0,g.filter)(K,(e=>(null===Se||void 0===Se?void 0:Se.includes(null===e||void 0===e?void 0:e.client_name))&&(null===ke||void 0===ke?void 0:ke.includes(null===e||void 0===e?void 0:e.check_name))));(0,n.useEffect)((()=>{const e=ye===(null===D.G7||void 0===D.G7?void 0:D.G7.STAFF)?Oe:ye===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)?0===W?(0,g.map)(De,(e=>({...e,check_status:"PENDING"}))):(0,g.map)(De,(e=>({...e,check_status:"VENDOR CLOSED"}))):(0,g.includes)(D._8,ye)?be:K;ce(e)}),[K,ye]);const xe=()=>{le(!0),fetch(ye===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)?"https://imranks.pythonanywhere.com/api/users/vendororderchecks/".concat(0===W?"open":"close","/").concat(ne,"/").concat(se):"https://imranks.pythonanywhere.com/api/users/orderchecks/".concat(0===W?"open":2===W?"close":3===W?"cancelled":"draft","/").concat(ne,"/").concat(se)).then((e=>e.json())).then((e=>{let l=null===JSON||void 0===JSON?void 0:JSON.parse(e.data);delete l.subRows,delete l.checks,X((0,g.reverse)(l))})).finally((()=>{le(!1)}))},Ne=[{name:"order_id",label:"ORDER #"},{name:"id",label:"CHECK #"},{name:"CandidateName",label:"CANDIDATE NAME"},{name:"client_name",label:"CLIENT",options:{display:ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)&&!(0,g.includes)(D._8,ye)}},{name:"check_name",label:"CHECKS"},{name:"date_created",label:"CREATED DATE",options:{display:ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR),filter:!1,customBodyRender:(e,l)=>e?y()(e).format("DD-MMM-YY"):"-"}},{name:"date_initiated",label:"INITIATED DATE",options:{filter:!1,display:1!==W&&!(0,g.includes)(D._8,ye),customBodyRender:(e,l)=>e?y()(e).format("DD-MMM-YY"):"-"}},{name:"tat",label:"TAT",options:{filter:!1,display:1!==W&&!(0,g.includes)(D._8,ye),customBodyRender:(e,l)=>e||14}},{name:"deadline",label:"DEADLINE",options:{filter:!1,display:1!==W&&!(0,g.includes)(D._8,ye),customBodyRender:(e,l)=>e?y()(e).format("DD-MMM-YY"):"-"}},{name:"date_created",label:"AGING",options:{filter:!1,display:ye===(null===D.G7||void 0===D.G7?void 0:D.G7.STAFF),customBodyRender:(e,l)=>{var o;const i=y()(y()(e).format("DD-MMM-YY"),"DD-MMM-YY"),d=1===W?y()(null===(o=(0,g.find)(K,(e=>(null===e||void 0===e?void 0:e.id)===l.rowData[1])))||void 0===o?void 0:o.date_closed):y()();return null===d||void 0===d?void 0:d.diff(i,"days")}}},{name:"followUp",label:"FOLLOW UP",options:{display:ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)&&1!==W&&!(0,g.includes)(D._8,ye),filter:!1,customBodyRender:(e,l)=>{var o,i,d;const t=(0,g.find)(K,{id:null===l||void 0===l?void 0:l.rowData[1]});return null!==t&&void 0!==t&&t.calllogs&&!(0,g.isEmpty)(null===t||void 0===t?void 0:t.calllogs)&&null!==(o=(0,g.find)((0,g.reverse)(null===JSON||void 0===JSON?void 0:JSON.parse(null===t||void 0===t?void 0:t.calllogs)),(e=>null===e||void 0===e?void 0:e.followUp)))&&void 0!==o&&o.followUp?null===(i=y()(null===(d=(0,g.find)((0,g.reverse)(null===JSON||void 0===JSON?void 0:JSON.parse(null===t||void 0===t?void 0:t.calllogs)),(e=>null===e||void 0===e?void 0:e.followUp)))||void 0===d?void 0:d.followUp))||void 0===i?void 0:i.format("DD-MMM-YY"):"-"}}},{name:"assignedTo",label:"ASSIGNED TO",options:{display:ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)&&1!==W&&!(0,g.includes)(D._8,ye),customBodyRender:(e,l)=>{if(0!==W||ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.ADMIN)&&ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.SUPERVISOR))return e;{var o;const i=(0,g.chain)(oe).filter((e=>{var o,i,d,t;return e.checks&&((0,g.isArray)(JSON.parse(e.checks))||(0,g.isArray)(null===(o=JSON.parse(e.checks))||void 0===o?void 0:o.checksdata))?null===(i=(0,g.isArray)(null===(d=JSON.parse(e.checks))||void 0===d?void 0:d.checksdata)?null===(t=JSON.parse(e.checks))||void 0===t?void 0:t.checksdata:JSON.parse(e.checks))||void 0===i?void 0:i.some((e=>e.check_name===l.rowData[4])):(0,g.isObject)(JSON.parse(null===e||void 0===e?void 0:e.checks))&&e})).value();return(0,x.jsx)(a.Z,{id:"assignedTo",name:"assignedTo",value:((null===de||void 0===de?void 0:de.cellIndex)===(null===l||void 0===l?void 0:l.rowIndex)?null===de||void 0===de?void 0:de.assignedTo:e)||e,sx:{fontSize:"0.7rem","& .MuiSelect-select":{padding:"10px 15px !important"}},onChange:e=>{var o;Q(!0),pe({assignee:null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value,id:l.rowData[1]})},style:{width:"100%"},MenuProps:{PaperProps:{style:{maxHeight:200,width:160}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},children:(0,g.isEmpty)((0,g.filter)(i,(e=>(null===e||void 0===e?void 0:e.role)!=(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR))))?(0,x.jsx)(s.Z,{sx:{fontSize:"0.8rem"},children:"No staff is found"}):null===(o=(0,g.filter)(i,(e=>(null===e||void 0===e?void 0:e.role)!=(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR))))||void 0===o?void 0:o.map(((e,l)=>(0,x.jsx)(s.Z,{value:e.username,sx:{fontSize:"0.7rem"},children:e.username},l)))},null===l||void 0===l?void 0:l.rowIndex)}}}},{name:"vendor",label:"VENDOR",options:{display:ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)&&1!==W&&!(0,g.includes)(D._8,ye),customBodyRender:(e,l)=>{if(0!==W||ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.ADMIN)&&ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.SUPERVISOR)&&ye!==(null===D.G7||void 0===D.G7?void 0:D.G7.STAFF))return e;{var o;const i=(0,g.chain)(oe).filter((e=>{var o,i,d,t;return e.checks&&((0,g.isArray)(JSON.parse(e.checks))||(0,g.isArray)(null===(o=JSON.parse(e.checks))||void 0===o?void 0:o.checksdata))?null===(i=(0,g.isArray)(null===(d=JSON.parse(e.checks))||void 0===d?void 0:d.checksdata)?null===(t=JSON.parse(e.checks))||void 0===t?void 0:t.checksdata:JSON.parse(e.checks))||void 0===i?void 0:i.some((e=>e.check_name===l.rowData[4])):(0,g.isObject)(JSON.parse(null===e||void 0===e?void 0:e.checks))&&e})).value();return(0,x.jsx)(a.Z,{id:"vendor",name:"vendor",disabled:(0,g.isEmpty)(l.rowData[11]),value:((null===de||void 0===de?void 0:de.cellIndex)===(null===l||void 0===l?void 0:l.rowIndex)?null===me||void 0===me?void 0:me.vendor:e)||e,sx:{fontSize:"0.7rem","& .MuiSelect-select":{padding:"10px 15px !important"}},onChange:e=>{var o,i,d;he({vendor:null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value,id:l.rowData[1],vendorId:null===(i=(0,g.find)(oe,{username:null===e||void 0===e||null===(d=e.target)||void 0===d?void 0:d.value}))||void 0===i?void 0:i.id}),Q(!0)},style:{width:"100%"},MenuProps:{PaperProps:{style:{maxHeight:200,width:160}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},children:(0,g.isEmpty)((0,g.filter)(i,{role:"vendor"}))?(0,x.jsx)(s.Z,{sx:{fontSize:"0.8rem"},children:"No vendor is found"}):null===(o=(0,g.filter)(i,{role:"vendor"}))||void 0===o?void 0:o.map(((e,l)=>(0,x.jsx)(s.Z,{value:e.username,sx:{fontSize:"0.7rem"},children:null===e||void 0===e?void 0:e.username},l)))},null===l||void 0===l?void 0:l.rowIndex)}},setCellProps:()=>({style:{width:ye===(null===D.G7||void 0===D.G7?void 0:D.G7.STAFF)?"150px":"110px"}})}},{name:"check_status",label:"STATUS",options:{customBodyRender:(e,l)=>{var o;const i=y()(),d=y()(l.rowData[8]),t=null===d||void 0===d?void 0:d.diff(i,"days");let n;return n=2===W?"green":t<0?"red":0===t?"yellow":"orange",(0,x.jsxs)("span",{style:{color:null===(o=(0,g.find)(D.XZ,{label:e}))||void 0===o?void 0:o.color,display:"flex",alignItems:"center",gap:6},children:[e," ",(0,x.jsx)(k.hzX,{fill:n,size:21})]})}}},{name:"action",label:"ACTION",options:{filter:!1,customBodyRender:(e,l)=>(0,x.jsx)("div",{style:{display:"flex"},children:(0,x.jsx)(_.eDK,{size:23,color:"#524f4f",cursor:"pointer",onClick:()=>$("/orderchecks/checkDetails/"+l.rowData[1])})})}}];(0,n.useEffect)((()=>{xe(),(async()=>{let e=await h.Z.ListUsers();if(200===(null===e||void 0===e?void 0:e.status)){let l=null===JSON||void 0===JSON?void 0:JSON.parse(e.data.data);ie((0,g.filter)(l,(e=>"staff"===(null===e||void 0===e?void 0:e.role)||"supervisor"===(null===e||void 0===e?void 0:e.role)||"vendor"===(null===e||void 0===e?void 0:e.role))))}else console.error("Unexpected response status:",null===e||void 0===e?void 0:e.status)})()}),[]);const Ge={filterOptions:"fullWidth",selectableRows:(ye===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)||0===W)&&"multiple",print:!1,selectToolbarPlacement:"none",onRowSelectionChange:(e,l)=>{const o=l.map((e=>{var l;const o=e.dataIndex;return null===(l=ve[o])||void 0===l?void 0:l.id}));fe((0,g.concat)(ge,o))},rowsPerPageOptions:[30,50,100],rowsPerPage:30,viewColumns:!1,downloadOptions:{filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}},customFilterDialogFooter:()=>(0,x.jsxs)("div",{style:{paddingTop:"3rem",width:"100%",display:"flex",justifyContent:"space-between",gap:18},children:[(0,x.jsx)(r.Z,{label:"Start Date",type:"date",value:ne,fullWidth:!0,onChange:e=>ae(e.target.value),InputLabelProps:{shrink:!0}}),(0,x.jsx)(r.Z,{label:"End Date",type:"date",value:se,fullWidth:!0,onChange:e=>re(e.target.value),InputLabelProps:{shrink:!0}}),(0,x.jsx)(v.Z,{sx:{mt:10,pr:4,pl:4},onClick:xe,variant:"contained",children:"Apply"})]})},Ie=()=>{Q(!1)};return(0,x.jsxs)(c.ZP,{item:!0,fullwidth:"true",width:"100%",children:[ee?(0,x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,x.jsx)(u.Z,{color:"inherit",size:20})}):(0,x.jsx)(m.Z,{theme:(0,p.Z)({components:{MUIDataTable:{styleOverrides:{root:{boxShadow:"none",backgroundColor:"#FFF"}}},MUIDataTableHeadCell:{styleOverrides:{root:{backgroundColor:"#2152a1",color:"#fff",border:"none","&:first-of-type":{borderTopLeftRadius:"1rem"},"&:last-of-type":{borderTopRightRadius:"1rem"}},toolButton:{fontWeight:"bold",fontSize:"0.7rem"}}},MUIDataTableSelectCell:{styleOverrides:{headerCell:{border:"none",borderTopLeftRadius:"1rem",backgroundColor:"#2152a1","& .MuiCheckbox-root":{color:"#fff"}}}},MuiToolbar:{styleOverrides:{root:{minHeight:"30px!important"}}},MUIDataTableBodyRow:{styleOverrides:{root:{"&:nth-of-type(even)":{backgroundColor:"#EEF2FF"},"&:nth-of-type(odd)":{backgroundColor:"#FFF"},"& td":{textAlign:"left",border:"none"},marginBottom:"10px"}}},MuiTableCell:{styleOverrides:{root:{padding:ye===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)||0===W?"4px !important":"8px !important","&:first-of-type":{paddingLeft:ye===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)||0===W?"0":"1rem !important"}}}},MUIDataTableBodyRow:{styleOverrides:{root:{"&:nth-of-type(even)":{backgroundColor:"#dde1e9"}}}},MUIDataTableBodyCell:{styleOverrides:{root:{fontSize:"0.7rem"}}}}}),children:(0,x.jsx)(S.ZP,{title:"",data:ve,columns:Ne,options:{...Ge},style:{width:"800px",fontSize:"0.675rem"}})}),q&&(0,x.jsx)(b.Z,{open:q,handleDailogClose:Ie,handleChangeAssignee:()=>(0,g.isEmpty)(null===ue||void 0===ue?void 0:ue.assignee)?!(0,g.isEmpty)(null===me||void 0===me?void 0:me.vendor)&&((e,l,o)=>{const i=(0,g.find)(K,(e=>(null===e||void 0===e?void 0:e.id)===l)),d=(0,g.filter)(ye===(null===D.G7||void 0===D.G7?void 0:D.G7.STAFF)?Oe:ye===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)?De:K,(e=>(null===e||void 0===e?void 0:e.assignedTo)&&(0,g.includes)(ge,null===e||void 0===e?void 0:e.id))),t=(0,g.find)(oe,(e=>(null===e||void 0===e?void 0:e.id)===parseInt(o))),n=null!==t&&void 0!==t&&t.checks?(0,g.map)((0,g.filter)(d,(e=>{var l;return(0,g.includes)((0,g.map)(null===(l=JSON.parse(null===t||void 0===t?void 0:t.checks))||void 0===l?void 0:l.checksdata,(e=>null===e||void 0===e?void 0:e.check_name)),null===e||void 0===e?void 0:e.check_name)})),(e=>null===e||void 0===e?void 0:e.id)):[];let a={data:{check_status:"VENDOR",assignedTo:null===i||void 0===i?void 0:i.assignedTo,internalnotes:i.internalnotes,notes:i.notes,logs:i.logs,order_id:i.order_id,client_id:null===i||void 0===i?void 0:i.client_id,check_name:null===i||void 0===i?void 0:i.check_name,docUpload:null===i||void 0===i?void 0:i.docUpload,date_initiated:null===i||void 0===i?void 0:i.date_initiated,deadline:null===i||void 0===i?void 0:i.deadline,vendor_assigned:y()(new Date).format("YYYY-MM-DD hh:mm:ss"),vendor:e},id:l},s={table_name:"order_checks",field_to_update:"vendor",new_value:e,table_id:n,column_to_match:"id"},r={table_name:"order_checks",field_to_update:"check_status",new_value:"VENDOR",table_id:n,column_to_match:"id"};if((0,g.isEmpty)(ge))try{var v;(0,g.isEmpty)(null===a||void 0===a||null===(v=a.data)||void 0===v?void 0:v.deadline)&&(a.data=(0,g.omit)(a.data,"deadline"));const e=h.Z.EditOrderchecks(a);null===e||void 0===e||e.then((e=>{200===(null===e||void 0===e?void 0:e.status)&&((0,D.OD)("vendor assigned successfully"),xe(),he({vendor:"",id:"",vendorId:""}),Ie())}))}catch(c){console.error("error",c)}else try{const e=h.Z.UpdateMultipleAssignee(s);null===e||void 0===e||e.then((e=>{200===e.status&&h.Z.UpdateMultipleAssignee(r).then((e=>{200===(null===e||void 0===e?void 0:e.status)&&((0,D.OD)("vendor assigned successfully"),xe(),he({vendor:"",id:"",vendorId:""}),fe([]),Ie())}))}))}catch(c){console.error("error",c)}})(null===me||void 0===me?void 0:me.vendor,null===me||void 0===me?void 0:me.id,null===me||void 0===me?void 0:me.vendorId):((e,l)=>{var o;const i=(0,g.find)(K,(e=>(null===e||void 0===e?void 0:e.id)===l)),d=(0,g.map)((0,g.filter)(K,(e=>(null===e||void 0===e?void 0:e.order_id)===(null===i||void 0===i?void 0:i.order_id))),(e=>null===e||void 0===e?void 0:e.check_status)),t=!((0,g.isEmpty)(d)||(0,g.includes)(d,"INITIATED")||(0,g.includes)(d,"DRAFT"))&&(0,g.every)(d,(e=>{var l;return e===(null===(l=(0,g.find)(D.XZ,{label:e}))||void 0===l?void 0:l.label)}));let n={table_name:"orders",field_to_update:"status",new_value:"PENDING",table_id:null===i||void 0===i?void 0:i.order_id};const a=null===JSON||void 0===JSON?void 0:JSON.parse(null===i||void 0===i?void 0:i.logs),s={check_status:"",assignedTo:e,internalnotes:"",notes:"",sentence:null!==i&&void 0!==i&&i.assignedTo?"Assignee was updated ".concat(null===i||void 0===i?void 0:i.assignedTo," to ").concat(e):"Assignee was updated to ".concat(e),updatedAt:null===(o=y()())||void 0===o?void 0:o.format("MMMM DD, YYYY hh:mm a"),docUpload:[]},r=null!==a?JSON.stringify([s,...a],null,2):JSON.stringify([s]);let v={data:{check_status:"INITIATED",assignedTo:e,internalnotes:i.internalnotes,notes:i.notes,logs:r,order_id:i.order_id,client_id:null===i||void 0===i?void 0:i.client_id,check_name:null===i||void 0===i?void 0:i.check_name,docUpload:null===i||void 0===i?void 0:i.docUpload,date_initiated:y()().format("YYYY-MM-DD"),date_closed:null,deadline:y()().add(null!==i&&void 0!==i&&i.tat?parseInt(null===i||void 0===i?void 0:i.tat)+1:14,"days").format("YYYY-MM-DD hh:mm:ss")},id:l};if((0,g.isEmpty)(ge))try{var c;(0,g.isEmpty)(s)?v.data=(0,g.omit)(v.data,"logs"):(0,g.isEmpty)(null===v||void 0===v||null===(c=v.data)||void 0===c?void 0:c.deadline)&&(v.data=(0,g.omit)(v.data,"deadline")),h.Z.EditOrderchecks(v).then((e=>{200===e.status&&(te({assignedTo:""}),t&&h.Z.UpdateData(n),(0,D.OD)("Check updated successfully"),Ie(),xe())}))}catch(u){console.error("Error fetching checks:",u),Ie()}else{let l={table_name:"order_checks",field_to_update:"assignedTo",new_value:e,table_id:ge,column_to_match:"id"},o={table_name:"order_checks",field_to_update:"check_status",new_value:"INITIATED",table_id:ge,column_to_match:"id"},d={table_name:"order_checks",field_to_update:"deadline",new_value:y()().add(null!==i&&void 0!==i&&i.tat?null===i||void 0===i?void 0:i.tat:14,"days").format("YYYY-MM-DD hh:mm:ss"),table_id:ge,column_to_match:"id"};try{h.Z.UpdateMultipleAssignee(l).then((e=>{200===e.status&&h.Z.UpdateMultipleAssignee(o).then((e=>{200===(null===e||void 0===e?void 0:e.status)&&(h.Z.UpdateMultipleAssignee(d),pe({assignee:"",id:""}),Ie(),(0,D.OD)("Assignee updated successfully"),fe([]),xe())}))}))}catch(u){Ie(),console.error("Error fetching checks:",u)}}})(null===ue||void 0===ue?void 0:ue.assignee,null===ue||void 0===ue?void 0:ue.id)})]})}const G=()=>{var e;const[l,o]=(0,n.useState)(0),a=null===(e=localStorage)||void 0===e?void 0:e.getItem("role");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.Z,{sx:{width:"100%",borderRadius:2},children:(0,x.jsxs)(d.Z,{value:l,onChange:(e,l)=>{o(l)},"aria-label":"basic tabs example",children:[(0,x.jsx)(t.Z,{label:"Open Checks",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2}}),(0,x.jsx)(t.Z,{label:"Draft Checks",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2,display:a===(null===D.G7||void 0===D.G7?void 0:D.G7.VENDOR)?"none":"block"}}),(0,x.jsx)(t.Z,{label:"Closed Checks",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2}}),(0,x.jsx)(t.Z,{label:"Cancel Check",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2,display:a===(null===D.G7||void 0===D.G7?void 0:D.G7.ADMIN)?"block":"none"}})]})}),(0,x.jsxs)(i.Z,{sx:{width:"100%",mt:1},children:[0===l&&(0,x.jsx)(N,{value:l}),1===l&&(0,x.jsx)(N,{value:l}),2===l&&(0,x.jsx)(N,{value:l}),3===l&&(0,x.jsx)(N,{value:l})]})]})}}}]);
//# sourceMappingURL=938.a046f2c5.chunk.js.map