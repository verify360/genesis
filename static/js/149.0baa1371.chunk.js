"use strict";(self.webpackChunkverify360_react=self.webpackChunkverify360_react||[]).push([[149],{69149:(e,l,i)=>{i.r(l),i.d(l,{default:()=>T});var t=i(74599),n=i(72791),r=i(42419),a=i(41286),d=i(17817),o=i(25801),s=i(13239),c=i(81153),u=i(93006),v=i(45363),h=i(50168),m=i(17563),p=i(82626),x=i(73766),f=i(85771),y=i(13034),j=i(15416),g=i(22041),_=i(9195),Z=i(68745),C=i(62155),S=i(57621),b=i(39504),k=i(64554),w=i(30439),O=i(90977),E=i(20792),N=i(89891),D=i(94515),G=i(96846),P=i(61731),J=i(92506),z=i(763),A=i(25180),U=i(81724),R=(i(16579),i(57689)),M=i(80184);function T(){var e,l;const i=null===(e=localStorage)||void 0===e?void 0:e.getItem("role"),[c,u]=(0,n.useState)(!1),[v,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)([]),[x,f]=(0,n.useState)([]),[y,j]=(0,n.useState)("user"),[g,_]=(0,n.useState)(0),Z=JSON.parse(null===(l=localStorage)||void 0===l?void 0:l.getItem("user")),C=(0,R.s0)(),S=()=>{_(0),u(!1)};let b=[];const J=async()=>{h(!0);try{var e;if(b=await t.Z.ListUsers(),200===(null===(e=b)||void 0===e?void 0:e.status)){let e=null===JSON||void 0===JSON?void 0:JSON.parse(b.data.data);f(e);let l=[],t=(e.keys(),950/(Object.keys(e[0]).length-1));Object.keys(e[0]).map(((e,n)=>{"jwt_auth_active"===e?l.push({field:e,headerName:"ACTIVE",flex:1,renderCell:e=>(0,M.jsx)(o.Z,{control:(0,M.jsx)(N.Z,{color:"primary",defaultChecked:e.value,disabled:i===(null===A.G7||void 0===A.G7?void 0:A.G7.SUPERVISOR)}),size:"small",onChange:l=>U(l,e.id)})}):"checks"===e?l.push({field:e,headerName:"CLIENT CHECKS",flex:1,renderCell:e=>{var l;return(0,M.jsx)(o.Z,{control:(0,M.jsx)(O.Z,{type:"submit",color:"primary",variant:"contained",onClick:T(e.id,e.client,"checks",null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.role),children:(0,M.jsx)(d.Z,{})}),size:"small"})}}):"username"!==e&&"email"!==e&&"role"!==e||l.push({field:e,headerName:e.replaceAll("_"," ").toUpperCase(),editable:!1,flex:1,width:t})})),i!==(null===A.G7||void 0===A.G7?void 0:A.G7.SUPERVISOR)&&l.push({field:"actions",type:"actions",headerName:"Actions",width:100,cellClassName:"actions",getActions:e=>{let{id:l}=e;return[(0,M.jsx)(D.u,{color:"inherit",icon:(0,M.jsx)(a.Z,{color:"primary"}),label:"Edit",className:"textPrimary",onClick:T(l,"","user")})]}}),p(l)}else{var l;console.error("Unexpected response status:",null===(l=b)||void 0===l?void 0:l.status)}}catch(n){console.error("Error fetching data:",n)}finally{h(!1)}};(0,n.useEffect)((()=>{J()}),[]);const U=(e,l)=>{let i={table_name:"users",field_to_update:"jwt_auth_active",new_value:e.target.checked,table_id:l};try{t.Z.UpdateData(i)}catch(n){console.error("Error updating record :",n)}},T=(e,l,i,t)=>()=>{"vendor"===t?C("/master/vendorcheckprices/".concat(e)):(_(e),j(i),u(!0))};return(0,M.jsxs)(k.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:.5,"& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary",fontSize:"10px"},"& .MuiDataGrid-cellContent":{color:"text.primary",fontSize:"10px"},"& .MuiDataGrid-columnHeaderTitle":{color:"#fff",fontSize:"10px",fontWeight:"bold"},"& .MuiDataGrid-columnHeader":{bgcolor:"#2152a1"},"& .MuiDataGrid-row":{"&:nth-of-type(even)":{backgroundColor:"#DDE1E9"}},"& .MuiDataGrid-columnHeaderTitleContainer":{justifyContent:"flex-start"},"& .MuiDataGrid-cell--textLeft":{justifyContent:"flex-start !important"}},children:[(0,M.jsx)(k.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,M.jsx)(w.Z,{color:"primary",style:{display:i===(null===A.G7||void 0===A.G7?void 0:A.G7.SUPERVISOR)?"none":"flex"},startIcon:(0,M.jsx)(r.Z,{}),onClick:T("","","user"),variant:"contained",children:"Add User"})}),v?(0,M.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,M.jsx)(s.Z,{color:"inherit",size:20})}):(0,M.jsx)(G._$,{rows:(0,z.includes)(A._8,null===Z||void 0===Z?void 0:Z.role)?(0,z.filter)(x,(e=>(null===e||void 0===e?void 0:e.client_id)===(null===Z||void 0===Z?void 0:Z.client_id))):x,rowHeight:38,columns:m,disableRowSelectionOnClick:!0,slots:{toolbar:P.n},getRowClassName:e=>e.indexRelativeToCurrentPage%2===0?"even":"odd"}),(0,M.jsx)(E.Z,{open:c,onClose:S,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,M.jsxs)(k.Z,{sx:{maxHeight:"32rem",overflow:"scroll",overflowY:"auto",position:"absolute",maxHeight:"32rem",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,"& label":{lineHeight:"2em !important"}},children:["user"===y&&(0,M.jsx)(H,{id:g,rows:x,handleClose:S,fetchData:J}),"checks"===y&&(0,M.jsx)(I,{id:g,userclientsrows:x,handleClose:S,fetchData:J}),"terms"===y&&(0,M.jsx)(W,{id:g,termsrows:x,handleClose:S})]})})]})}const V=U.Ry().shape({username:U.Z_().required("Required"),email:U.Z_().required("Required"),role:U.Z_().required("Required")});function H(e){var l,i,r,a,d;let{id:y,rows:j,handleClose:g,fetchData:_=(()=>{})}=e;const[Z,C]=(0,n.useState)([]),[S,b]=(0,n.useState)(""),[k,O]=(0,n.useState)([]),[E,D]=(0,n.useState)(!1),[G,P]=(0,n.useState)(!1),U=j,R=JSON.parse(null===(l=localStorage)||void 0===l?void 0:l.getItem("user")),T=j.filter((e=>e.id===y))[0],H=null!==T&&void 0!==T&&T.clients?JSON.parse(null===T||void 0===T?void 0:T.clients):null;(0,n.useEffect)((()=>{(async()=>{P(!0);try{const e=await t.Z.ListClients();let l=JSON.parse(e.data.data);C(l)}catch(S){console.error("Error fetching data:",S)}finally{P(!1)}})()}),[]),(0,n.useEffect)((()=>{if(H){var e;(null===(e=H[0])||void 0===e?void 0:e.allClient)||(null===H||void 0===H?void 0:H.allClient)?D(!0):O(H)}}),[]);const I={width:"300px",marginBottom:"15px"},W=(0,J.TA)({initialValues:T||{username:"",clients:"",email:"",role:"",password:"Password@321",jwt_auth_active:!0,support:!1,client_name:"",client_id:(0,z.includes)(A._8,null===R||void 0===R?void 0:R.role)?(0,z.get)(R,"client_id",""):""},validationSchema:V,onSubmit:e=>{var l,i;const n={...e,clients:(0,z.isEmpty)(k)&&E?null===JSON||void 0===JSON?void 0:JSON.stringify([{allClient:!0}]):JSON.stringify(k),checks:(null===e||void 0===e?void 0:e.role)!==(null===A.G7||void 0===A.G7?void 0:A.G7.VENDOR)?null!==T&&void 0!==T&&T.checks?null===T||void 0===T?void 0:T.checks:JSON.stringify({allChecks:!0}):null};alert(JSON.stringify(n,null,2));U.map((e=>e.id===n.id?n:e));n.client_id=E?null===(l=(0,z.find)(Z,{client_type:"admin"}))||void 0===l?void 0:l.id:null===n||void 0===n?void 0:n.client_id,n.password=""!==n.id?"Password@321":n.password,n.client_name=(0,z.find)(Z,{id:null===n||void 0===n?void 0:n.client_id})?null===(i=(0,z.find)(Z,{id:null===n||void 0===n?void 0:n.client_id}))||void 0===i?void 0:i.client_name:"";!function(e){if(!S)try{let l=t.Z.mUsers({data:e});if(null===l||void 0===l||l.then((e=>{200===(null===e||void 0===e?void 0:e.status)&&(y?(0,A.OD)("User updated successfully"):(0,A.OD)("User added successfully"),g(),_())})),l.data&&!1===l.data.success)return(0,A.OD)(l.data.msg,"error"),b(l.data.msg)}catch(l){return l.response?((0,A.OD)(l.response.data.msg,"error"),b(l.response.data.msg)):b("There has been an error.")}}(y?(0,z.omit)(n,"password"):n)}});return j=j.filter((e=>e.id!==y)),(0,M.jsx)(M.Fragment,{children:G?(0,M.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,M.jsx)(s.Z,{color:"inherit",size:20})}):(0,M.jsxs)(J.Hy,{value:W,children:[(0,M.jsxs)("h2",{children:[y?"Edit":"Add"," User"]}),(0,M.jsx)("hr",{}),(0,M.jsx)("p",{}),(0,M.jsxs)("form",{onSubmit:W.handleSubmit,children:[(0,M.jsxs)(c.ZP,{container:!0,spacing:3,children:[(0,M.jsxs)(c.ZP,{item:!0,xs:6,children:[(0,M.jsx)("p",{}),!(0,z.includes)(A._8,null===R||void 0===R?void 0:R.role)&&(0,M.jsx)(o.Z,{control:(0,M.jsx)(N.Z,{defaultChecked:W.values.support||!1,onChange:e=>{var l,i,t;null===W||void 0===W||W.setFieldValue("support",null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.checked),null!==e&&void 0!==e&&null!==(i=e.target)&&void 0!==i&&i.checked?null===W||void 0===W||W.setFieldValue("client_id",null===(t=(0,z.find)(Z,{client_type:"admin"}))||void 0===t?void 0:t.id):null===W||void 0===W||W.setFieldValue("client_name","")},color:"primary"}),label:"Internal Support",name:"support"}),(0,M.jsx)(J.gN,{as:u.Z,style:{...I},name:"username",label:"User Name",fullWidth:!0,onChange:e=>{var l;return null===W||void 0===W?void 0:W.setFieldValue("username",(0,A.Ao)(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value))},value:W.values.username||"",error:W.touched.username&&Boolean(W.errors.username),helperText:W.touched.username&&W.errors.username}),(0,M.jsx)(J.gN,{as:u.Z,style:{...I},name:"email",label:"Email",fullWidth:!0,onChange:W.handleChange,value:W.values.email,error:W.touched.email&&Boolean(W.errors.email),helperText:W.touched.email&&W.errors.email}),(0,M.jsxs)(v.Z,{fullWidth:!0,children:[(0,M.jsx)(h.Z,{id:"select-label",children:"Select Role"}),(0,M.jsxs)(m.Z,{id:"role",name:"role",style:{...I},fontSize:"sm",fullWidth:!0,label:"Role",width:"250px",variant:"outlined",onChange:e=>{var l,i;(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)===(null===A.G7||void 0===A.G7?void 0:A.G7.ADMIN)?D(!0):D(!1),null===W||void 0===W||W.setFieldValue("role",null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)},value:W.values.role||"",error:W.touched.role&&Boolean(W.errors.role),children:[(0,M.jsx)(p.Z,{value:"",children:"Select Role"}),W.values.support?A.YK.map(((e,l)=>(0,M.jsx)(p.Z,{value:e,children:e.toUpperCase()},l))):A._8.map(((e,l)=>(0,M.jsx)(p.Z,{value:e,children:e.toUpperCase()},l)))]})]}),(0,M.jsx)(o.Z,{control:(0,M.jsx)(N.Z,{color:"primary",defaultChecked:W.values.jwt_auth_active||!0}),label:"Active",name:"jwt_auth_active"})]}),(0,M.jsxs)(c.ZP,{item:!0,xs:6,children:[(0,M.jsx)("p",{}),(null===W||void 0===W||null===(i=W.values)||void 0===i?void 0:i.support)&&(0,M.jsx)(o.Z,{control:(0,M.jsx)(N.Z,{disabled:!(0,z.isEmpty)(k),checked:E,onChange:e=>{var l,i,t;(D(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.checked),null!==e&&void 0!==e&&null!==(i=e.target)&&void 0!==i&&i.checked)&&(null===W||void 0===W||W.setFieldValue("client_id",null===(t=(0,z.find)(Z,{client_type:"admin"}))||void 0===t?void 0:t.id),O([]))},color:"primary"}),label:"Include all clients"}),(0,M.jsxs)(v.Z,{fullWidth:!0,children:[(0,M.jsx)(x.Z,{sx:{border:S&&(0,z.isEmpty)(k)&&!E?"1px solid #ff6a46":"none",marginTop:null!==W&&void 0!==W&&null!==(r=W.values)&&void 0!==r&&r.support?"0px":"2.3rem"},onChange:(e,l)=>{var i;O((0,z.unionBy)((0,z.concat)(k,l),"id")),null===W||void 0===W||W.setFieldValue("client_id",null===l||void 0===l||null===(i=l[0])||void 0===i?void 0:i.id)},multiple:!0,value:k,options:Z,getOptionLabel:e=>null===e||void 0===e?void 0:e.client_name,disabled:E,renderInput:e=>(0,M.jsx)(u.Z,{...e,label:"Select Client",variant:"outlined"}),renderTags:e=>(0,z.map)((0,z.unionBy)((0,z.flatMapDeep)(e),"id"),((e,l)=>(0,M.jsx)(f.Z,{label:null===e||void 0===e?void 0:e.client_name,onDelete:()=>O((0,z.filter)(k,(l=>(null===l||void 0===l?void 0:l.id)!==(null===e||void 0===e?void 0:e.id))))},l)))}),S&&(0,z.isEmpty)(k)&&!E&&(0,M.jsx)("span",{style:{color:"red",fontSize:"0.68rem"},children:"Required"})]}),(0,M.jsx)("p",{}),(0,M.jsxs)(v.Z,{fullWidth:!0,children:[(0,M.jsx)(h.Z,{id:"select-label",children:"Select Default Client"}),(0,M.jsx)(m.Z,{id:"client_id",name:"client_id",style:{...I},fontSize:"sm",fullWidth:!0,label:"Parent Client",width:"250px",variant:"outlined",disabled:E||(0,z.includes)(A._8,null===R||void 0===R?void 0:R.role),onChange:e=>{var l;null===W||void 0===W||W.setFieldValue("client_id",null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)},value:W.values.client_id||"",error:W.touched.client_id&&Boolean(W.errors.client_id),MenuProps:{PaperProps:{style:{maxHeight:200,width:160}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},children:E?(0,M.jsx)(p.Z,{selected:!0,value:null===(a=(0,z.find)(Z,{client_type:"admin"}))||void 0===a?void 0:a.id,children:null===(d=(0,z.find)(Z,{client_type:"admin"}))||void 0===d?void 0:d.client_name}):null===k||void 0===k?void 0:k.map(((e,l)=>(0,M.jsx)(p.Z,{value:e.id,children:null===e||void 0===e?void 0:e.client_name},l)))})]})]})]}),(0,M.jsx)(w.Z,{type:"submit",color:"primary",variant:"contained",onClick:()=>(0,z.isEmpty)(k)&&!E?b(!0):b(!1),children:"Submit"})]})]})})}function I(e){var l,i,r;let{id:a,userclientsrows:d=[],handleClose:s,fetchData:v=(()=>{})}=e;const h=null===(l=localStorage)||void 0===l?void 0:l.getItem("role"),[m,p]=(0,n.useState)([]),[f,S]=(0,n.useState)([]),[b,O]=(0,n.useState)([]),[E,D]=(0,n.useState)(!0),[G,P]=(0,n.useState)([]),[J,U]=(0,n.useState)([]);let R=JSON.parse(null===(i=d.filter((e=>e.id===a))[0])||void 0===i?void 0:i.clients),T=JSON.parse(null===(r=d.filter((e=>e.id===a))[0])||void 0===r?void 0:r.checks);(0,n.useEffect)((()=>{try{let e=[];e=t.Z.ListClients(),e.then((e=>{let l=JSON.parse(e.data.data);var i;R&&R.length>0&&(null!==(i=R[0])&&void 0!==i&&i.allClient?S(l):S(R))}))}catch(e){console.error("Error fetching data:",e)}}),[]);const V=(e,l)=>{const i=null===l||void 0===l?void 0:l.id;try{t.Z.getClientChecks(i).then((e=>{var l,t,n,r;const a=null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.data?JSON.parse(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data):"",d=(null===(n=(0,z.find)(m,{id:i}))||void 0===n?void 0:n.client_name)||(null===(r=(0,z.find)(R,{id:i}))||void 0===r?void 0:r.client_name);if(200===(null===e||void 0===e?void 0:e.status)){const e=(0,z.map)((0,z.filter)(a,{active:!0}),(e=>({client_name:d,check_name:null===e||void 0===e?void 0:e.check_name,check_id:null===e||void 0===e?void 0:e.check_id,id:null===e||void 0===e?void 0:e.client_id})));O((0,z.unionBy)(e,"check_id"));const l=(e,l)=>e.check_id===l.check_id&&e.client_name===l.client_name;P((0,z.flatMap)([...G,(0,z.intersectionWith)(e,T,l)]))}}))}catch(n){console.error(n)}};(0,n.useEffect)((()=>{!(0,z.isEmpty)(T)&&(0,z.isObject)(T)&&null!==T&&void 0!==T&&T.allChecks&&D(!0)}),[]),(0,n.useEffect)((()=>{var e;(0,z.isEmpty)(R)||null!==(e=R[0])&&void 0!==e&&e.allClient||(0,z.isEmpty)(T)||!(0,z.isArray)(T)||null!==T&&void 0!==T&&T.allChecks||(V(0,(0,z.find)(R,(e=>null===e||void 0===e?void 0:e.id))),D(!1),U(T))}),[]);const H={padding:"10px",textAlign:"center",fontSize:"0.68rem"};return(0,M.jsxs)(k.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:3,"& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary",fontSize:"10px"},"& .MuiDataGrid-cellContent":{color:"text.primary",fontSize:"10px"},"& .MuiDataGrid-columnHeaderTitle":{color:"text.primary",fontSize:"10px",fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{bgcolor:"#a8d6f8"}},children:[(0,M.jsx)("h2",{children:"Manage User Checks"}),(0,M.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,M.jsxs)(c.ZP,{item:!0,md:12,spacing:1,sx:{display:"flex"},children:[(0,M.jsx)(c.ZP,{item:!0,md:4.5,children:(0,M.jsx)(o.Z,{control:(0,M.jsx)(N.Z,{variant:"outlined",checked:E,onChange:e=>{var l;return D(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.checked)},color:"primary",sx:{width:"54px"}}),label:"Include all client checks ?"})}),(0,M.jsx)(c.ZP,{item:!0,md:7,children:!E&&(0,M.jsx)(x.Z,{defaultValue:R.find((e=>null===e||void 0===e?void 0:e.client_name)),onChange:(e,l)=>{V(0,l),D(!1)},options:f,getOptionLabel:e=>e.client_name,disabled:E,renderInput:e=>(0,M.jsx)(u.Z,{...e,label:"Search...",variant:"outlined",sx:{padding:"8px !important"}})})})]}),(0,M.jsx)(c.ZP,{container:!0,spacing:2,sx:{paddingLeft:2.5,paddingTop:1},children:[...Array(3)].map(((e,l)=>{const i=b.filter(((e,i)=>i%3===l));return(0,M.jsx)(c.ZP,{item:!0,md:4,children:i.map(((e,l)=>(0,M.jsxs)("div",{children:[(0,M.jsx)(y.Z,{variant:"outlined",checked:G.includes(e),onChange:()=>(e=>{const l=G.includes(e),i=(0,z.filter)(J,e);P((i=>l?i.filter((l=>l!==e)):[...i,e])),U((l=>(0,z.isEmpty)(i)?[...l,e]:l.filter((e=>!(0,z.isEqual)(e,i[0])))))})(e)}),(0,M.jsx)("span",{children:e.check_name})]},l)))},l)}))}),(0,M.jsx)(c.ZP,{md:12,pt:4,children:(0,M.jsxs)(k.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,M.jsx)(w.Z,{onClick:s,variant:"contained",children:"Cancel"}),(0,M.jsx)(w.Z,{onClick:()=>{let e={table_name:"users",field_to_update:"checks",new_value:E?JSON.stringify({allChecks:!0}):JSON.stringify(J),table_id:a};try{let l=t.Z.UpdateData(e);null===l||void 0===l||l.then((e=>{200===(null===e||void 0===e?void 0:e.status)&&((0,A.OD)("Terms updated successfully"),s(),v())}))}catch(l){console.error("Error updating record :",l)}},variant:"contained",disabled:h===(null===A.G7||void 0===A.G7?void 0:A.G7.SUPERVISOR),children:"Update Checks"})]})}),(0,M.jsx)(c.ZP,{md:12,sx:{paddingTop:"1rem"},children:!(0,z.isEmpty)(J)&&(0,M.jsxs)(j.Z,{children:[(0,M.jsx)(g.Z,{children:(0,M.jsxs)(_.Z,{children:[(0,M.jsx)(Z.Z,{style:{...H},children:"No."}),(0,M.jsx)(Z.Z,{style:{...H},children:"ClientName"}),(0,M.jsx)(Z.Z,{style:{...H},children:"CheckName"})]})}),(0,M.jsx)(C.Z,{children:(0,z.map)(J,((e,l)=>(0,M.jsxs)(_.Z,{children:[(0,M.jsx)(Z.Z,{style:{...H},children:l+1}),(0,M.jsx)(Z.Z,{style:{...H},children:null===e||void 0===e?void 0:e.client_name}),(0,M.jsx)(Z.Z,{style:{...H},children:null===e||void 0===e?void 0:e.check_name})]})))})]})})]})]})}function W(e){let{id:l,termsrows:i,handleClose:r}=e;const[a,d]=(0,n.useState)([]),[s,v]=(0,n.useState)([]);let h=[];(0,n.useEffect)((()=>{try{let e="";if(Array.isArray(i)){const t=i.find((e=>e.id===l));e=(null===t||void 0===t?void 0:t.terms)||""}e&&v(JSON.parse(e)),h=t.Z.ListUserTerms("user"),h.then((e=>{let l=JSON.parse(e.data.data);d(l)}))}catch(e){console.error("Error fetching data:",e)}}),[]);(0,n.useEffect)((()=>{const e=(0,z.find)(i,{id:l});if(null!==e&&void 0!==e&&e.terms){const l=null===JSON||void 0===JSON?void 0:JSON.parse(null===e||void 0===e?void 0:e.terms);v(l)}}),[]);function m(e){try{if(Array.isArray(s)){let l=s.find((l=>l.id==e));return!!l&&l.term_value}return!1}catch(l){console.error("Error updating record :",l)}}return(0,M.jsxs)(k.Z,{sx:{width:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary",fontSize:"10px"},"& .MuiDataGrid-cellContent":{color:"text.primary",fontSize:"10px"},"& .MuiDataGrid-columnHeaderTitle":{color:"text.primary",fontSize:"10px",fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{bgcolor:"#a8d6f8"}},children:[(0,M.jsx)("h2",{children:"Manage User Terms"}),(0,M.jsx)("p",{}),(0,M.jsxs)(c.ZP,{item:!0,xs:12,sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,M.jsx)(S.Z,{children:(0,M.jsx)(b.Z,{children:a.map((e=>(0,M.jsxs)(k.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:["".concat(e.term_text," (").concat(e.term_type,") - ").concat(e.term_value),"boolean"===e.term_type||"hide/show"===e.term_type?(0,M.jsx)(o.Z,{control:(0,M.jsx)(y.Z,{checked:m(e.id),onChange:l=>((e,l)=>{if(e.target.checked)if(Array.isArray(s)){let i=s.filter((e=>e.id===(null===l||void 0===l?void 0:l.id)));i.length?i.term_value=e.target.checked:v((i=>[...i,{...l,term_value:e.target.checked}]))}else v((i=>[...i,{...l,term_value:e.target.checked}]));else v((e=>e.filter((e=>e.id!==(null===l||void 0===l?void 0:l.id)))))})(l,e)}),label:"hide/show"===e.term_type?"Show":"Yes"}):(0,M.jsx)(u.Z,{label:"Term Value",name:"term_value",defaultValue:m(e.term_name)||e.term_value,onChange:l=>((e,l)=>{try{if(e.target.value)if(Array.isArray(s)){let i=s.filter((e=>e.term_name===l));i.length?i.term_value=e.target.value:v((i=>[...i,{term_name:l,term_value:e.target.value}]))}else v((i=>[...i,{term_name:l,term_value:e.target.value}]));else v((e=>Array.isArray(e)?e.filter((e=>e.term_name!==l)):e))}catch(i){console.error("Error updating record :",i)}})(l,e.term_name),margin:"normal"})]},e.id)))})}),(0,M.jsxs)(k.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,M.jsx)(w.Z,{onClick:r,variant:"contained",children:"Cancel"}),(0,M.jsx)(w.Z,{onClick:()=>{let e={table_name:"users",field_to_update:"terms",new_value:JSON.stringify(s),table_id:l};try{t.Z.UpdateData(e).then((e=>{200===e.status&&((0,A.OD)("User terms updated successfully"),r())}))}catch(i){console.error("Error updating record :",i)}},variant:"contained",children:"Update Terms"})]})]})]})}},17817:(e,l,i)=>{var t=i(64836);l.Z=void 0;var n=t(i(45649)),r=i(80184),a=(0,n.default)((0,r.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H6c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1zm0-4H6c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1zm0-4H6c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1zm9.7 2.12-3.17 3.17c-.39.39-1.03.39-1.42 0l-1.41-1.42a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0l.71.71 2.47-2.47c.39-.39 1.02-.39 1.41 0l.01.01c.38.39.38 1.03-.01 1.41z"}),"FactCheckRounded");l.Z=a}}]);
//# sourceMappingURL=149.0baa1371.chunk.js.map