"use strict";(self.webpackChunkverify360_react=self.webpackChunkverify360_react||[]).push([[772],{4170:(e,t,a)=>{a.d(t,{Z:()=>b});var i=a(72791),o=a(5936),l=a(94515),r=a(41973),s=a(96846),n=a(61731),d=a(64554),c=a(29464),u=a(30439),h=a(16856),p=a(90503),x=a(53329),v=a(29823),f=a(763),m=a(14651),y=a(80184);const b=e=>{let{data:t,onSave:a,rowId:b,isClientChecksPrice:g=!1,tat:j=14}=e;const[Z,C]=(0,i.useState)(t),[w,k]=i.useState({}),[S,N]=(0,i.useState)(14),P=[{field:"country",headerName:"Country",width:250,editable:!1},{field:"INR",headerName:"INR",flex:1,editable:!0,sortable:!1,filterable:!1},{field:"USD",headerName:"USD",flex:1,editable:!0,sortable:!1,filterable:!1},{field:"GBP",headerName:"GBP",flex:1,editable:!0,sortable:!1,filterable:!1},{field:"EUR",headerName:"EUR",flex:1,editable:!0,sortable:!1,filterable:!1},{field:"AED",headerName:"AED",flex:1,editable:!0,sortable:!1,filterable:!1},{field:"SGD",headerName:"SGD",flex:1,editable:!0,sortable:!1,filterable:!1},{field:"actions",type:"actions",headerName:"",cellClassName:"actions",getActions:e=>{var t;let{id:a}=e;return(null===(t=w[a])||void 0===t?void 0:t.mode)===o.se.Edit?[(0,y.jsx)(l.u,{icon:(0,y.jsx)(x.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:D(a)}),(0,y.jsx)(l.u,{icon:(0,y.jsx)(v.default,{}),label:"Cancel",className:"textPrimary",onClick:_(a),color:"inherit"})]:[(0,y.jsx)(l.u,{icon:(0,y.jsx)(m.TDG,{size:20,style:{display:0==a?"flex":"none"}}),sx:{color:"primary.main",padding:0==a?"0":"9px"},label:"Replace",onClick:z}),(0,y.jsx)(l.u,{icon:(0,y.jsx)(h.mM_,{size:22}),label:"Edit",className:"textPrimary",onClick:M(a),color:"inherit"}),(0,y.jsx)(l.u,{icon:(0,y.jsx)(p.Z,{}),label:"Delete",sx:{color:"primary.main"},onClick:R(a),color:"inherit"})]}}],E=()=>{a(b,Z,S)};(0,i.useEffect)((()=>{g&&N(j)}),[g]);const M=e=>()=>{k({...w,[e]:{mode:o.se.Edit}})},D=e=>()=>{k({...w,[e]:{mode:o.se.View}})},R=e=>()=>{C(Z.filter((t=>t.id!==e)))},_=e=>()=>{k({...w,[e]:{mode:o.se.View,ignoreModifications:!0}});Z.find((t=>t.id===e)).isNew&&C(Z.filter((t=>t.id!==e)))},H=e=>{k(e)},z=()=>{const e=(0,f.map)(Z,(e=>{const t=(0,f.map)((0,f.filter)(P,(e=>"actions"!==(null===e||void 0===e?void 0:e.field)&&"country"!==(null===e||void 0===e?void 0:e.field))),(e=>null===e||void 0===e?void 0:e.field)),a=(0,f.mapValues)((0,f.keyBy)(t),(e=>Z[0][e]));return{...e,...a}}));C(e)};return(0,y.jsx)(d.Z,{sx:{height:"500px",width:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary",fontSize:"10px",color:"primary.main"},"& .MuiDataGrid-cellContent":{color:"text.primary",fontSize:"10px"},"& .MuiDataGrid-columnHeaderTitle":{color:"#fff",fontSize:"10px",fontWeight:"bold"},"& .MuiDataGrid-columnHeader":{bgcolor:"#2152a1",height:"40px",minHeight:"45px",padding:"0"},"& .MuiDataGrid-row":{"&:nth-of-type(even)":{backgroundColor:"#DDE1E9"}}},children:(0,y.jsx)(s._$,{rows:Z,columns:P,rowHeight:25,autoPageSize:!0,slots:{toolbar:()=>(0,y.jsxs)(c.Z,{variant:"dense",children:[(0,y.jsx)(n.n,{showQuickFilter:!0}),(0,y.jsx)("div",{style:{flexGrow:1}}),g&&(0,y.jsxs)("label",{style:{width:"11%"},children:[(0,y.jsx)("span",{style:{fontSize:"0.8rem"},children:"TAT: "}),(0,y.jsx)("input",{type:"number",value:S,autoFocus:!0,style:{width:"45%"},onChange:e=>{var t;return N(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}}),S&&(0,y.jsx)("span",{style:{fontSize:"0.8rem"},children:" days"})]}),(0,y.jsx)(u.Z,{variant:"contained",onClick:E,children:"Update Prices"})]})},editMode:"row",rowModesModel:w,onRowModesModelChange:H,onRowEditStop:(e,t)=>{e.reason===r.U.rowFocusOut&&(t.defaultMuiPrevented=!0)},processRowUpdate:e=>{const t={...e,isNew:!1};return C(Z.map((a=>a.id===e.id?t:a))),t},onSelectionModelChange:H,onProcessRowUpdateError:e=>console.log("error",e),onEditCellChange:(e,t)=>{e.field,t.target.value}})})}},78772:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var i=a(42419),o=a(35585),l=a(81153),r=a(64554),s=a(50168),n=a(17563),d=a(82626),c=a(30439),u=a(13239),h=a(57621),p=a(9585),x=a(4567),v=a(39504),f=a(74599),m=a(45875),y=a(763),b=a(72791),g=a(75985),j=a(25180),Z=a(34045),C=a(4170),w=a(57689),k=a(80184);const S=()=>{const e=(0,w.s0)(),[t,a]=(0,b.useState)([]),[S,N]=(0,b.useState)(!1),[P,E]=(0,b.useState)(!1),[M,D]=(0,b.useState)(null),[R,_]=(0,b.useState)(""),[H,z]=(0,b.useState)(!1),O=(0,b.useCallback)((e=>{const t=[],a=Object.keys(e);Object.keys(e[a[0]]).forEach((i=>{const o={Country:i};a.forEach((t=>{o[t]=e[t][i]||0})),t.push(o)}));const i=Z.P6.json_to_sheet(t),o=Z.P6.book_new();Z.P6.book_append_sheet(o,i,"Data"),Z.NC(o,"Price_List.xlsx"),(0,j.OD)("Excel download successfully")}),[]);(0,b.useEffect)((()=>{(async()=>{N(!0);try{let e=await f.Z.ListExChecks({}),t=JSON.parse(e.data.data);a(t)}catch(e){console.error("Error fetching data:",e)}finally{N(!1)}})()}),[]);const T=(e,a)=>{t.find((t=>t.id===e)).price=a;let i=f.Z.UpdateChecksPrices({id:e,rows:a});null===i||void 0===i||i.then((()=>{(0,j.OD)("Price updates successfully")}))};return(0,k.jsx)(l.ZP,{container:!0,spacing:2,children:(0,k.jsxs)(l.ZP,{item:!0,xs:12,sx:{width:"100%",padding:0,"& .MuiCardHeader-root":{padding:"20px !important"},"& .MuiCardContent-root":{padding:"5px !important"}},children:[(0,k.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"flex-end",paddingBottom:"0.7rem",gap:2},children:[(0,y.isEmpty)(R)&&(0,k.jsx)(s.Z,{style:{top:22,fontSize:"0.95rem !important",left:130,color:"#9B9EA0"},children:"Select currency"}),(0,k.jsx)(n.Z,{fontSize:"sm",ms:{base:"0px",md:"0px"},mb:"24px",style:{width:"165px"},fontWeight:"500",value:R,onChange:e=>_(e.target.value),children:null===j.Zo||void 0===j.Zo?void 0:j.Zo.map(((e,t)=>(0,k.jsx)(d.Z,{value:e,children:e},t)))}),(0,k.jsx)(c.Z,{type:"submit",variant:"contained",onClick:async()=>{E(!0);try{let t=await f.Z.checkPriceList(R);var e;if(200==(null===t||void 0===t?void 0:t.status))O(JSON.parse(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data))}catch(t){console.error(t)}finally{E(!1)}},disabled:(0,y.isEmpty)(R)||P,children:P?(0,k.jsx)(m.l,{}):"Download Excel"})]}),S?(0,k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,k.jsx)(u.Z,{color:"inherit",size:20})}):t.map(((l,r)=>{var s;return(0,k.jsxs)(b.Fragment,{children:[(0,k.jsxs)(h.Z,{sx:{border:"8px solid #fff"},children:[(0,k.jsx)(p.Z,{sx:{background:"#B7C0D0"},title:(0,k.jsx)(x.Z,{t:"div",className:"card-header",children:l.check_name}),action:null!==l&&void 0!==l&&l.check_fields&&(0,y.isEmpty)(JSON.parse(null===l||void 0===l?void 0:l.check_fields))||null===l||void 0===l||!l.check_fields?(0,k.jsx)(c.Z,{onClick:()=>e("/master/checks/".concat(null===l||void 0===l?void 0:l.id)),children:"Add Form"}):M===l.id?(0,k.jsx)(o.default,{onClick:()=>D(null),sx:{cursor:"pointer",marginRight:"0.7rem"}}):(0,k.jsx)(i.Z,{onClick:()=>{(e=>{D(e)})(l.id),(async e=>{z(!0);try{const i=await f.Z.getChecksPrice(e);if(200===(null===i||void 0===i?void 0:i.status)){const o=(0,y.map)(t,(t=>{var a,o;return(null===t||void 0===t?void 0:t.id)===e?{...null===(a=JSON.parse(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.data))||void 0===a?void 0:a[0],check_fields:null===t||void 0===t?void 0:t.check_fields}:t}));a(o)}else console.error("Non-200 status code:",i.status)}catch(i){null===g.Am||void 0===g.Am||g.Am.error(null===i||void 0===i?void 0:i.message),console.error("Error fetching data:",i)}finally{z(!1)}})(l.id)},sx:{cursor:"pointer",marginRight:"0.7rem",display:"flex",justifyContent:"center",alignItems:"center"}})}),M===(null===l||void 0===l?void 0:l.id)&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(v.Z,{children:H?(0,k.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"100%"},children:(0,k.jsx)(u.Z,{color:"inherit",size:18})}):(null===(s=t[r])||void 0===s?void 0:s.price)&&(0,k.jsx)(C.Z,{data:null===l||void 0===l?void 0:l.price,onSave:T,rowId:l.id,handlePriceUpdate:()=>(()=>{const e=[];let t=[];JSON.parse(JSON.stringify(e)).map((e=>{let a=0;delete e.check_name,delete e.client_id,delete e.client_name,a=e.id,delete e.id;let i=e;delete i.isNew,t.push({id:a,price:i,disc:0})}))})()})})})]}),(0,k.jsx)("p",{})]},r)}))]})})}},90503:(e,t,a)=>{var i=a(64836);t.Z=void 0;var o=i(a(45649)),l=a(80184),r=(0,o.default)((0,l.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");t.Z=r},9585:(e,t,a)=>{a.d(t,{Z:()=>j});var i=a(63366),o=a(87462),l=a(72791),r=a(28182),s=a(94419),n=a(4567),d=a(31402),c=a(66934),u=a(75878),h=a(21217);function p(e){return(0,h.Z)("MuiCardHeader",e)}const x=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var v=a(80184);const f=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],m=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,o.Z)({["& .".concat(x.title)]:t.title,["& .".concat(x.subheader)]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),g=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),j=l.forwardRef((function(e,t){const a=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:l,avatar:c,className:u,component:h="div",disableTypography:x=!1,subheader:j,subheaderTypographyProps:Z,title:C,titleTypographyProps:w}=a,k=(0,i.Z)(a,f),S=(0,o.Z)({},a,{component:h,disableTypography:x}),N=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,t)})(S);let P=C;null==P||P.type===n.Z||x||(P=(0,v.jsx)(n.Z,(0,o.Z)({variant:c?"body2":"h5",className:N.title,component:"span",display:"block"},w,{children:P})));let E=j;return null==E||E.type===n.Z||x||(E=(0,v.jsx)(n.Z,(0,o.Z)({variant:c?"body2":"body1",className:N.subheader,color:"text.secondary",component:"span",display:"block"},Z,{children:E}))),(0,v.jsxs)(m,(0,o.Z)({className:(0,r.default)(N.root,u),as:h,ref:t,ownerState:S},k,{children:[c&&(0,v.jsx)(y,{className:N.avatar,ownerState:S,children:c}),(0,v.jsxs)(g,{className:N.content,ownerState:S,children:[P,E]}),l&&(0,v.jsx)(b,{className:N.action,ownerState:S,children:l})]}))}))}}]);
//# sourceMappingURL=772.75361d55.chunk.js.map