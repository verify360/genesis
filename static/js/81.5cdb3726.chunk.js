"use strict";(self.webpackChunkverify360_react=self.webpackChunkverify360_react||[]).push([[81],{9081:(e,o,l)=>{l.r(o),l.d(o,{default:()=>A});var n=l(64554),r=l(39124),t=l(43896),i=l(30439),d=l(72791),a=l(21051),s=l(57482),c=l(39281),u=l(4841),v=l(15416),p=l(22041),h=l(9195),m=l(68745),f=l(62155),x=l(97639),b=l(93006),y=l(81153),g=l(13239),j=l(61608),k=l(57012),C=l(763),D=l(72426),w=l.n(D),S=l(89078),Z=l(30203),R=l(57689),_=l(25180),O=l(16534),E=l(74599),T=l(10549),I=l(80184);function M(e){var o,l,n,r,t,D,O,M;let{value:A}=e;const B=(0,R.s0)(),[N,F]=(0,d.useState)([]),[L,Y]=(0,d.useState)([]),[P,W]=(0,d.useState)([]),[G,U]=(0,d.useState)(!0),[J,H]=(0,d.useState)(!1),[X,Q]=(0,d.useState)(null),q=JSON.parse(null===(o=localStorage)||void 0===o?void 0:o.getItem("user")),[K,V]=(0,d.useState)(w()().clone().subtract(30,"days").format("YYYY-MM-DD")),[$,ee]=(0,d.useState)(w()().clone().add(1,"day").format("YYYY-MM-DD")),[oe,le]=(0,d.useState)(),[ne,re]=(0,d.useState)(0),[te,ie]=(0,d.useState)(!1),de=(null===(l=localStorage)||void 0===l?void 0:l.getItem("clients"))&&(0,C.isArray)(JSON.parse(null===(n=localStorage)||void 0===n?void 0:n.getItem("clients")))&&(0,C.compact)((0,C.map)(JSON.parse(null===(r=localStorage)||void 0===r?void 0:r.getItem("clients")),(e=>null===e||void 0===e?void 0:e.client_name))),ae=(0,C.isEmpty)(de)?null!==(t=localStorage)&&void 0!==t&&t.getItem("clients")&&null!==(D=JSON.parse(null===(O=localStorage)||void 0===O?void 0:O.getItem("clients"))[0])&&void 0!==D&&D.allClients?N:[]:(0,C.filter)(N,(e=>null===de||void 0===de?void 0:de.includes(null===e||void 0===e?void 0:e.client_name))),se=(e,o)=>{let l=3===A?"#4B9945":"dark"===o?"#9f6e3e":"#6b503752";for(const n of e){if(!n.deadline)continue;const e=null!==n&&void 0!==n&&n.date_closed?null===n||void 0===n?void 0:n.date_closed:w()(),r=n.deadline,t=w()(e).isAfter(w()(r)),i=w()(n.deadline).diff(e,"days");if(r&&t){l="dark"===o?"#f60909":"#f8bfbf";break}if(r&&i<=3&&i>=0){l="dark"===o?"#f3905b ":"#e9c2ad";break}}return l},ce=async()=>{try{var e;U(!0);const o=2===A?await fetch("https://imranks.pythonanywhere.com/api/users/listbulkorders/open/".concat(K,"/").concat($)):await fetch("https://imranks.pythonanywhere.com/api/users/listorders/".concat(4===A?"cancelled":3===A?"close":1===A?"draft":"open","/").concat(K,"/").concat($)),l=await o.json();let n=null===(e=JSON.parse(l.data))||void 0===e?void 0:e.rowsData;n.forEach((e=>{e.subRows.forEach((e=>{Y((o=>(0,C.uniqBy)([...o,e],"order_checks_id")))}))})),delete n.subRows,delete n.checks;const r=(0,C.filter)((0,C.map)(n,(e=>({...e,status:null===e||void 0===e?void 0:e.status}))),(e=>null===e||void 0===e?void 0:e.status));F((0,C.filter)(r,(e=>"CANCELLED"!==(null===e||void 0===e?void 0:e.status))))}catch(o){console.error("Error fetching data:",o)}finally{U(!1)}};(0,d.useEffect)((()=>{const e=(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)?ae:N;W(e)}),[N,null===q||void 0===q?void 0:q.role]);const ue=()=>{H(!1)},ve=[{name:"order_id",label:"ORDER NO."},{name:"candidate",label:"CANDIDATE NAME"},{name:"client_name",label:"CLIENT",options:{display:!(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)}},{name:"date",label:"ORDER DATE",options:{filter:!1,customBodyRender:(e,o)=>w()(e).format("DD-MMM-YY")}},{name:"date_enabled",label:"INITIATED DATE",options:{filter:!1,customBodyRender:(e,o)=>e?w()(e).format("DD-MMM-YY"):"-"}},{name:"assignee",label:"CREATED BY",options:{filter:!1}},{name:"client_project",label:"BILLING IDENTIFIER",options:{filter:!1,customBodyRender:(e,o)=>e||"-"}},{name:"progress",label:"PROGRESS",options:{filter:!1,customBodyRender:(e,o)=>{var l;const n=(0,C.filter)(L,{order_id:null===o||void 0===o||null===(l=o.rowData)||void 0===l?void 0:l[0]});return(0,I.jsxs)("div",{children:[(0,I.jsxs)("span",{style:{fontSize:"0.65rem",display:"flex",justifyContent:"center"},children:[(0,C.round)(e,2),"%"]}),(0,I.jsx)(s.Z,{variant:"determinate","aria-label":"direct",value:e,sx:{"& .css-5xe99f-MuiLinearProgress-bar1":{backgroundColor:se(n,"dark")},"& .css-t752vm":{backgroundColor:se(n,"dark")}," &.MuiLinearProgress-root":{backgroundColor:se(n,"light")}}})]})}}},{name:"score",label:"Deposition",options:{display:!1}},{name:"status",label:"STATUS",options:{customBodyRender:(e,o)=>{var l,n;return o.rowData[8]?(0,I.jsx)("span",{style:{color:null===(l=(0,C.find)(_.zI,{label:o.rowData[8]}))||void 0===l?void 0:l.color},children:o.rowData[8]}):(0,C.find)(_.XZ,{label:o.rowData[9]})?(0,I.jsx)("span",{style:{color:null===(n=(0,C.find)(_.XZ,{label:o.rowData[9]}))||void 0===n?void 0:n.color},children:o.rowData[9]}):(0,I.jsxs)("span",{children:[" ",o.rowData[9]]})}}},{name:"action",label:"ACTION",options:{filter:!1,customBodyRender:(e,o)=>(0,I.jsxs)("div",{style:{display:"flex",gap:6},children:[3===A&&(null===q||void 0===q?void 0:q.role)===(null===_.G7||void 0===_.G7?void 0:_.G7.STAFF)&&(0,I.jsx)(i.Z,{variant:"contained",sx:{backgroundColor:"#bf1e2e",textTransform:"none",fontSize:"0.8rem",padding:"3px 7px"},onClick:()=>{Q(o.rowData[0]),H(!0)},children:"Reopen"}),(0,I.jsx)("span",{onClick:()=>B("/order/orderdetails/"+o.rowData[0]),style:{cursor:"pointer"},children:(0,I.jsx)(a.Z,{sx:{color:"#524f4f"}})})]})}}],pe=[{name:"order_id",label:"ORDER NO."},{name:"date",label:"ORDER DATE",options:{filter:!1,customBodyRender:(e,o)=>w()(e).format("DD-MMM-YY")}},{name:"candidate",label:"CANDIDATE NAME"},{name:"client_project",label:"BILLING IDENTIFIER",options:{filter:!1,customBodyRender:(e,o)=>e||"-"}},{name:"progress",label:"PROGRESS",options:{filter:!1,customBodyRender:(e,o)=>{var l;const n=(0,C.filter)(L,{order_id:null===o||void 0===o||null===(l=o.rowData)||void 0===l?void 0:l[0]});return(0,I.jsxs)("div",{style:{width:"50%"},children:[(0,I.jsxs)("span",{style:{fontSize:"0.65rem",display:"flex"},children:[(0,C.round)(e,2),"%"]}),(0,I.jsx)(s.Z,{variant:"determinate","aria-label":"direct",value:e,sx:{"& .css-5xe99f-MuiLinearProgress-bar1":{backgroundColor:se(n,"dark")},"& .css-t752vm":{backgroundColor:se(n,"dark")}," &.MuiLinearProgress-root":{backgroundColor:se(n,"light")}}})]})}}},{name:"score",label:"Deposition",options:{display:!1}},{name:"status",label:"STATUS",options:{customBodyRender:(e,o)=>{var l,n;return o.rowData[5]?(0,I.jsx)("span",{style:{color:null===(l=(0,C.find)(_.zI,{label:o.rowData[5]}))||void 0===l?void 0:l.color},children:o.rowData[5]}):(0,C.find)(_.XZ,{label:e})?(0,I.jsx)("span",{style:{color:null===(n=(0,C.find)(_.XZ,{label:e}))||void 0===n?void 0:n.color},children:e}):(0,I.jsxs)("span",{children:[" ",e]})}}},{name:"action",label:"ACTION",options:{filter:!1,customBodyRender:(e,o)=>(0,I.jsx)("div",{style:{display:"flex",gap:6},children:(0,I.jsx)("span",{onClick:()=>B("/order/orderdetails/"+o.rowData[0]),style:{cursor:"pointer"},children:(0,I.jsx)(a.Z,{sx:{color:"#524f4f"}})})})}}];(0,d.useEffect)((()=>{ce()}),[null===q||void 0===q||null===(M=q.clientInfo)||void 0===M?void 0:M.approveToClose,null===q||void 0===q?void 0:q.role,null===q||void 0===q?void 0:q.support]);const he={expandableRows:!0,filterOptions:"fullWidth",selectableRows:3===A||"none",print:!1,rowsPerPageOptions:[30,50,100],rowsPerPage:30,viewColumns:!1,downloadOptions:{filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}},renderExpandableRow:(e,o)=>{const l=L.filter((o=>o.order_id===e[0]));let n=(e=>{const o={};return e.map((e=>{const l=e.check.includes("-")?e.check:(0,C.truncate)(e.check.toUpperCase(),{length:3,omission:""});return o[l]?o[l]+=1:o[l]=1,{...e,check:"".concat(l,"-").concat(o[l])}}))})(l);return(0,I.jsx)(d.Fragment,{children:(0,I.jsx)("tr",{children:(0,I.jsx)("td",{colSpan:12,children:(0,I.jsx)(c.Z,{component:u.Z,children:(0,I.jsxs)(v.Z,{"aria-label":"simple table",children:[(0,I.jsx)(p.Z,{children:(0,I.jsxs)(h.Z,{sx:{background:"#d9e4eb"},children:[(0,I.jsx)(m.Z,{}),(0,I.jsxs)(m.Z,{style:{fontSize:"0.8rem",paddingLeft:"4rem",fontWeight:"bolder"},children:[(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)?"Component":"Check"," ","#"]}),(0,I.jsx)(m.Z,{style:{fontSize:"0.8rem",paddingLeft:"4rem",fontWeight:"bolder"},children:(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)?"Components":"Checks"}),(0,I.jsx)(m.Z,{style:{fontSize:"0.8rem",fontWeight:"bolder"},children:"Package"}),!(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)&&(0,I.jsx)(m.Z,{style:{fontSize:"0.8rem",fontWeight:"bolder"},children:"Assigned To"}),(0,I.jsx)(m.Z,{style:{fontSize:"0.8rem",fontWeight:"bolder"},children:"Initiated Date"}),!(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)&&(0,I.jsx)(m.Z,{style:{fontSize:"0.8rem",fontWeight:"bolder"},children:"Deadline"}),(0,I.jsx)(m.Z,{style:{fontSize:"0.8rem",fontWeight:"bolder"},children:"Status"}),(0,I.jsx)(m.Z,{style:{fontSize:"0.8rem",fontWeight:"bolder"}})]})}),(0,I.jsx)(f.Z,{children:null===n||void 0===n?void 0:n.map(((o,n)=>{var r;return(0,I.jsxs)(h.Z,{style:n%2===0?{background:"#fff"}:{background:"#f0f8ff"},children:[(0,I.jsx)(m.Z,{}),(0,I.jsx)(m.Z,{component:"th",scope:"row",style:{fontSize:"0.7rem"},children:null!==o&&void 0!==o&&o.order_checks_id?null===o||void 0===o?void 0:o.order_checks_id:"-"}),(0,I.jsx)(m.Z,{style:{fontSize:"0.7rem",paddingLeft:"4rem"},children:(0,I.jsx)(x.Z,{title:null===(r=l[n])||void 0===r?void 0:r.check,arrow:!0,placement:"top",children:(0,I.jsx)("span",{children:o.check})})}),(0,I.jsx)(m.Z,{component:"th",scope:"row",style:{fontSize:"0.7rem"},children:null===o||void 0===o?void 0:o.Package}),!(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)&&(0,I.jsx)(m.Z,{component:"th",scope:"row",style:{fontSize:"0.7rem"},children:null!==o&&void 0!==o&&o.assignedTo?null===o||void 0===o?void 0:o.assignedTo:"-"}),(0,I.jsx)(m.Z,{component:"th",scope:"row",style:{fontSize:"0.7rem"},children:null!==o&&void 0!==o&&o.date_initiated?null===o||void 0===o?void 0:o.date_initiated:"-"}),!(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)&&(0,I.jsxs)(m.Z,{component:"th",scope:"row",style:{fontSize:"0.7rem"},children:[null!==o&&void 0!==o&&o.deadline?null===o||void 0===o?void 0:o.deadline:"-"," "]}),(0,I.jsx)(m.Z,{component:"th",scope:"row",style:{fontSize:"0.7rem"},children:null===o||void 0===o?void 0:o.status}),"-"!==e[4]&&!(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)&&(0,I.jsx)(m.Z,{component:"th",scope:"row",children:(0,I.jsx)(Z.zgG,{onClick:()=>B("/orderchecks/checkDetails/"+(null===o||void 0===o?void 0:o.order_checks_id)),cursor:"pointer",size:15})})]},n)}))})]})})})})})},customFilterDialogFooter:()=>(0,I.jsxs)("div",{style:{paddingTop:"3rem",width:"100%",display:"flex",justifyContent:"space-between",gap:18},children:[(0,I.jsx)(b.Z,{label:"Start Date",type:"date",value:K,fullWidth:!0,onChange:e=>V(e.target.value),InputLabelProps:{shrink:!0}}),(0,I.jsx)(b.Z,{label:"End Date",type:"date",value:$,fullWidth:!0,onChange:e=>ee(e.target.value),InputLabelProps:{shrink:!0}}),(0,I.jsx)(i.Z,{sx:{mt:10,pr:4,pl:4},onClick:ce,variant:"contained",children:"Apply"})]}),onRowSelectionChange:(e,o)=>{const l=(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)?ae:N,n=(0,C.filter)(l,((e,l)=>(0,C.includes)((0,C.map)(o,(e=>null===e||void 0===e?void 0:e.dataIndex)),l)));le(n)},customToolbarSelect:(e,o,l)=>(0,I.jsx)(z,{onDownloadAll:()=>{re(0),ie(!0)},downloadQueue:oe})},me=[...ve];return(0,d.useEffect)((()=>{if(te&&3===A&&(null===oe||void 0===oe?void 0:oe.length)>0&&ne<oe.length){const e=document.getElementById("download-link-".concat(ne));null===e||void 0===e||e.click(),re(ne+1)}else ie(!1)}),[ne,oe,te]),(0,I.jsxs)(y.ZP,{item:!0,fullwidth:"true",width:"100%",children:[G?(0,I.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,I.jsx)(g.Z,{color:"inherit",size:20})}):(0,I.jsx)(k.Z,{theme:(0,j.Z)({components:{MUIDataTable:{styleOverrides:{root:{boxShadow:"none",backgroundColor:"#FFF"}}},MUIDataTableHeadCell:{styleOverrides:{root:{backgroundColor:"#2152a1",color:"#fff",border:"none","&:last-of-type":{borderTopRightRadius:"1rem"}},toolButton:{fontWeight:"bold",fontSize:"0.7rem"}}},MUIDataTableSelectCell:{styleOverrides:{headerCell:{border:"none",borderTopLeftRadius:"1rem",backgroundColor:"#2152a1","& .MuiCheckbox-root":{color:"#fff"}}}},MuiToolbar:{styleOverrides:{root:{minHeight:"30px!important"}}},MUIDataTableBodyRow:{styleOverrides:{root:{"&:nth-of-type(even)":{backgroundColor:"#EEF2FF"},"&:nth-of-type(odd)":{backgroundColor:"#FFF"},"& td":{textAlign:"left",border:"none"},marginBottom:"10px"}}},MuiTableCell:{styleOverrides:{root:{padding:"4px !important"}}},MUIDataTableBodyRow:{styleOverrides:{root:{"&:nth-of-type(even)":{backgroundColor:"#dde1e9"}}}},MUIDataTableBodyCell:{styleOverrides:{root:{fontSize:"0.7rem"}}}}}),children:(0,I.jsx)(S.ZP,{title:"",data:P,columns:2===A?[me[0],{name:"bulk_order_id",label:"BULK ORDER #"},...me.slice(1)]:(0,C.includes)(_._8,null===q||void 0===q?void 0:q.role)?pe:ve,options:he,style:{width:"800px",fontSize:"0.675rem"}})}),J&&(0,I.jsx)(T.Z,{open:J,handleDailogClose:ue,handleChangeAssignee:()=>{const e=E.Z.updateOrder({status:"REOPEN",reopened_by_id:null===q||void 0===q?void 0:q._id,reopened_by_name:null===q||void 0===q?void 0:q.username,date_reopened:w()().format("YYYY-MM-DD HH:mm:ss"),date_closed:null},X);null===e||void 0===e||e.then((e=>{200===(null===e||void 0===e?void 0:e.status)&&((0,_.OD)("Order reopen successfully"),ue(),Q(null),ce())}))}})]})}const z=e=>{let{onDownloadAll:o,downloadQueue:l}=e;return(0,I.jsx)("div",{children:(null===l||void 0===l?void 0:l.length)>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(i.Z,{variant:"outlined",sx:{textTransform:"none",px:1,py:.4,border:"1px solid #BE1E2E",color:"#BE1E2E",mr:3,my:1},onClick:o,children:"Download Reports"}),null===l||void 0===l?void 0:l.map(((e,o)=>(0,I.jsx)("div",{style:{display:"table-column"},children:(0,I.jsx)(O.o,{orderDetail:e,fileName:"Order_".concat(null===e||void 0===e?void 0:e.order_id,".pdf"),id:"download-link-".concat(o)})},o)))]})})},A=()=>{var e;const[o,l]=(0,d.useState)(0),a=(0,R.s0)(),s=JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user")),c=e=>{l(e)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,I.jsx)(n.Z,{sx:{width:"100%",borderRadius:2},children:(0,I.jsxs)(r.Z,{value:o,"aria-label":"basic tabs example",children:[(0,I.jsx)(t.Z,{value:0,label:"Open Orders",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2,py:0,height:1},onClick:()=>c(0)}),(0,I.jsx)(t.Z,{label:"Draft Orders",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2},onClick:()=>c(1)}),(0,I.jsx)(t.Z,{value:2,label:"Bulk Orders",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2,display:(0,C.includes)(_._8,null===s||void 0===s?void 0:s.role)?"none":"block"},onClick:()=>c(2)}),(0,I.jsx)(t.Z,{value:3,label:"Closed Orders",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2},onClick:()=>c(3)}),(0,I.jsx)(t.Z,{value:4,label:"Cancel Order",sx:{textTransform:"none",backgroundColor:"#e6e6e6",mx:1,borderRadius:2,display:(null===s||void 0===s?void 0:s.role)===(null===_.G7||void 0===_.G7?void 0:_.G7.ADMIN)?"block":"none"},onClick:()=>c(4)})]})}),(0,I.jsxs)(n.Z,{sx:{display:"flex"},children:[(0,I.jsx)(i.Z,{variant:"contained",name:"Submit",className:"button",type:"button",sx:{whiteSpace:"nowrap",textTransform:"none"},onClick:()=>a("/order/createorders"),children:"Create Order"}),(0,I.jsx)(i.Z,{variant:"contained",name:"Submit",className:"button",type:"submit",sx:{whiteSpace:"nowrap",textTransform:"none"},onClick:()=>a("/order/candidateOrder"),children:"Create Candidate Order"}),!(0,C.includes)(_._8,null===s||void 0===s?void 0:s.role)&&(0,I.jsx)(i.Z,{variant:"contained",name:"Submit",className:"button",type:"submit",sx:{whiteSpace:"nowrap",textTransform:"none"},onClick:()=>a("/order/candidateOrder"),children:"Create Bulk Order"})]})]}),(0,I.jsxs)(n.Z,{sx:{width:"100%",mt:1},children:[0===o&&(0,I.jsx)(M,{value:o}),1===o&&(0,I.jsx)(M,{value:o}),2===o&&(0,I.jsx)(M,{value:o}),3===o&&(0,I.jsx)(M,{value:o}),4===o&&(0,I.jsx)(M,{value:o})]})]})}},10549:(e,o,l)=>{l.d(o,{Z:()=>c});l(72791);var n=l(30439),r=l(5289),t=l(65661),i=l(39157),d=l(51691),a=l(97123),s=l(80184);const c=e=>{let{open:o,handleDailogClose:l,handleChangeAssignee:c}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.Z,{open:o,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialog-paper":{width:"500px",height:"auto"}},children:[(0,s.jsx)(t.Z,{id:"alert-dialog-title",children:(0,s.jsx)("h2",{children:"Confirmation"})}),(0,s.jsx)(i.Z,{children:(0,s.jsx)(d.Z,{id:"alert-dialog-description",sx:{fontSize:"0.85rem!important"},children:"Are you sure you want to proceed?"})}),(0,s.jsxs)(a.Z,{sx:{pr:4,pb:3},children:[(0,s.jsx)(n.Z,{onClick:l,color:"primary",variant:"contained",children:"Cancel"}),(0,s.jsx)(n.Z,{onClick:c,color:"primary",autoFocus:!0,variant:"contained",children:"Confirm"})]})]})})}},21051:(e,o,l)=>{var n=l(64836);o.Z=void 0;var r=n(l(45649)),t=l(80184),i=(0,r.default)((0,t.jsx)("path",{d:"M13 7h9v2h-9zm0 8h9v2h-9zm3-4h6v2h-6zm-3 1L8 7v4H2v2h6v4z"}),"ReadMore");o.Z=i}}]);
//# sourceMappingURL=81.5cdb3726.chunk.js.map