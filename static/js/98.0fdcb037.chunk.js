"use strict";(self.webpackChunkverify360_react=self.webpackChunkverify360_react||[]).push([[98],{96665:(e,i,t)=>{t.r(i),t.d(i,{default:()=>w});var n=t(72791),s=t(81153),l=t(13239),a=t(64554),o=t(17563),r=t(57621),d=t(39504),c=t(4567),u=t(57482),p=t(66934),h=t(13967),m=t(13496),x=t(80184);var v=t(12251),g=t(23197),j=(t(38885),t(763));var f=t(74599),Z=t(72426),y=t.n(Z),C=t(25180);const b=e=>{let{data:i}=e;const{categories:t,initiatedData:n,closedData:s}=(e=>{const i=(0,j.omit)((0,j.mapKeys)((0,j.groupBy)(e,0),((e,i)=>(0,j.head)(null===i||void 0===i?void 0:i.split(" ")))),"null"),t=(0,j.map)(i,((e,i)=>{const t=(0,j.reduce)(e,((e,i)=>{let[,t,,n]=i;return(0,j.includes)((0,j.map)((0,j.filter)(C.XZ,{type:"closed"}),"label"),t)?e.closedCount=(e.closedCount||0)+n:"PENDING"===t?e.pendingCount=(e.pendingCount||0)+n:"INITIATED"===t&&(e.initiatedCount=(e.initiatedCount||0)+n),e}),{});return{name:i,closedCount:void 0!==t.closedCount?t.closedCount:0,initiatedCount:void 0!==t.initiatedCount?t.initiatedCount:0}}));return{categories:(0,j.map)(t,"name"),initiatedData:(0,j.map)(t,"initiatedCount"),closedData:(0,j.map)(t,"closedCount")}})(i),l={options:{chart:{id:"basic-bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,barHeight:"100%",dataLabels:{enabled:!1}}},colors:["#5A6C9B","#2152a1"],xaxis:{categories:t,labels:{show:!0},axisBorder:{show:!1}},yaxis:{show:!1,axisBorder:{show:!1},axisTicks:{show:!1}},grid:{show:!1},legend:{show:!1}},series:[{name:"INITIATED",data:n},{name:"CLOSED",data:s}]};return(0,x.jsx)("div",{className:"app",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"mixed-chart",children:(0,x.jsx)(m.Z,{options:l.options,series:l.series,type:"bar",width:"500"})})})})};var k=t(30203),Y=t(63524),D=t(31457);const S=e=>{let{label:i,value:t}=e;const n=["#5A6D9C","#4D6290","#415784","#344B78","#273F6C","#1A3260"];return(0,x.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,x.jsx)(D.Z,{arcWidth:.4,id:"gauge-chart1",nrOfLevels:500,needleBaseColor:"#000",arcsLength:t,colors:n,cornerRadius:0,percent:.7,arcPadding:0,hideText:!0}),(0,x.jsx)(a.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.8,justifyContent:"center",alignItems:"center"},children:(0,j.map)(i,((e,i)=>(0,x.jsxs)(a.Z,{sx:{display:"flex",gap:1,flexBasis:"calc(25% - 16px)",alignItems:"center"},children:[(0,x.jsx)("span",{style:{backgroundColor:n[i],width:"10px",height:"10px",borderRadius:"50%",display:"inline-block"}}),(0,x.jsx)("span",{style:{color:n[i]},children:(0,j.head)(null===e||void 0===e?void 0:e.split(" "))})]},i)))})]})};t.p;var O=t(82626);(0,p.ZP)((e=>(0,x.jsx)(s.ZP,{item:!0,sm:6,xs:12,...e})))((e=>{let{theme:i}=e;return{padding:"25px 25px",borderLeft:"1px solid"+i.palette.background.default,[i.breakpoints.down("sm")]:{borderLeft:"none",borderBottom:"1px solid"+i.palette.background.default},[i.breakpoints.down("md")]:{borderBottom:"1px solid"+i.palette.background.default}}}));const w=()=>{var e,i,t,p,m,Z,D,w,P,B,N,I,M,T;const A=(0,h.Z)(),[J,z]=(0,n.useState)([]),[E,F]=(0,n.useState)(!1),[L,W]=(0,n.useState)(null),_=null!==(e=localStorage)&&void 0!==e&&e.getItem("user")?JSON.parse(null===(i=localStorage)||void 0===i?void 0:i.getItem("user")):{},R=localStorage.getItem("clients")?JSON.parse(localStorage.getItem("clients")):"",H=(0,n.useCallback)((async e=>{var i;const t={from:y()().clone().subtract(30,"days").format("YYYY-MM-DD"),to:y()().format("YYYY-MM-DD"),role:null===_||void 0===_?void 0:_.role,clientId:e||(null===(i=(0,j.find)(R,"id"))||void 0===i?void 0:i.id),userId:null===_||void 0===_?void 0:_._id};try{var n;F(!0);const e=await f.Z.getDashboardCount(t),i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data,s=i.openOrderCount+i.closedOrderCount,l=i.openChecksCount+i.closedChecksCount,a={totalOrders:s,openOrders:i.openOrderCount,closedOrders:i.closedOrderCount,totalChecks:l,openChecks:i.openChecksCount,closedChecks:i.closedChecksCount,checksAssignedTo:i.checksAssignedTo,assignedToByStatus:i.assignedToByStatus,checksByClients:i.checksByClients};z([a])}catch(s){console.error("Error fetching data:",s)}finally{F(!1)}}),[]);(0,n.useEffect)((()=>{H()}),[]);const G=!(0,j.isEmpty)(J)&&J[0]?null===Object||void 0===Object?void 0:Object.keys(J[0]).filter((e=>"checksAssignedTo"!==e&&"checksByClients"!==e&&"assignedToByStatus"!==e)):[],K=(A.palette.primary.light,A.palette.warning.main,A.palette.success.main,A.palette.primary.light,A.palette.warning.main,A.palette.success.main,A.palette.warning.main,A.palette.primary.light,A.palette.success.main,A.palette.warning.main,A.palette.primary.light,A.palette.success.main,null!==(t=J[0])&&void 0!==t&&null!==(p=t.checksAssignedTo)&&void 0!==p&&p.replace(/\\/g,"")?null===JSON||void 0===JSON||null===(m=JSON.parse(null===(Z=J[0])||void 0===Z||null===(D=Z.checksAssignedTo)||void 0===D?void 0:D.replace(/\\/g,"")))||void 0===m?void 0:m.filter((e=>null!==e[0])):[]),X=null===K||void 0===K?void 0:K.map((e=>e[0])),$=null===K||void 0===K?void 0:K.map((e=>e[1])),q=null!==(w=J[0])&&void 0!==w&&null!==(P=w.checksByClients)&&void 0!==P&&P.replace(/\\/g,"")?(0,j.map)((0,j.compact)(null===JSON||void 0===JSON?void 0:JSON.parse(null===(B=J[0])||void 0===B||null===(N=B.checksByClients)||void 0===N?void 0:N.replace(/\\/g,""))),(e=>(0,j.zipObject)(["name","count"],e))):[];null===v.Z||void 0===v.Z||v.Z.error,null===v.Z||void 0===v.Z||v.Z.primary,null===v.Z||void 0===v.Z||v.Z.info,y()().format("DD-MM-YYYY"),y()().format("DD-MM-YYYY"),y()().format("DD-MM-YYYY"),y()().format("DD-MM-YYYY"),y()().format("DD-MM-YYYY"),y()().format("DD-MM-YYYY");return(0,x.jsx)(x.Fragment,{children:E?(0,x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,x.jsx)(l.Z,{color:"inherit",size:20})}):(0,x.jsxs)(x.Fragment,{children:[(0,j.includes)(C._8,null===_||void 0===_?void 0:_.role)&&(0,x.jsx)(a.Z,{sx:{display:"flex",justifyContent:"flex-end",pb:1},children:(0,x.jsx)(o.Z,{value:L||(null===(I=(0,j.find)(R,"id"))||void 0===I?void 0:I.id),onChange:e=>{const i=e.target.value;W(i),H(i)},variant:"outlined",sx:{minWidth:120,backgroundColor:"#2152a1",p:"3.5px 15px","& .MuiOutlinedInput-input":{p:"8.5px 14px !important",color:"#FFF"},"& .MuiSelect-icon":{color:"white"}},children:R&&!(0,j.isEmpty)(R)&&(0,j.filter)(R,(e=>1!==(null===e||void 0===e?void 0:e.id))).map(((e,i)=>(0,x.jsx)(O.Z,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.client_name},i)))})}),(0,x.jsxs)(s.ZP,{container:!0,spacing:2,children:[null===G||void 0===G?void 0:G.map(((e,i)=>{var t,n;return(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:4,md:2,children:(0,x.jsx)(r.Z,{children:(0,x.jsx)(d.Z,{children:(0,x.jsxs)(s.ZP,{container:!0,direction:"column",spacing:1,children:[(0,x.jsxs)(s.ZP,{item:!0,container:!0,justifyContent:"space-between",children:[(0,x.jsx)(k.$yZ,{fill:"#1e4f9e",size:20}),(0,x.jsx)(Y.Ds6,{fill:"grey",size:20})]}),(0,x.jsx)(s.ZP,{item:!0,children:(0,x.jsx)(c.Z,{variant:"h3",sx:{color:"#1e4f9e",fontSize:"1.6rem",fontWeight:500},children:null===J||void 0===J||null===(t=J[0])||void 0===t?void 0:t[e]})}),(0,x.jsx)(s.ZP,{item:!0,children:(0,x.jsx)(c.Z,{sx:{color:"grey"},children:(0,j.startCase)(Object.keys(J[0])[i])})}),(0,x.jsx)(s.ZP,{item:!0,children:(0,x.jsx)(a.Z,{width:"100%",children:(0,x.jsx)(u.Z,{variant:"determinate",value:null===J||void 0===J||null===(n=J[0])||void 0===n?void 0:n[e],sx:{height:9,borderRadius:5}})})})]})})})},i)})),(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:4,spacing:1,children:(0,x.jsx)(r.Z,{sx:{height:"100%"},children:(0,x.jsxs)(d.Z,{children:[(0,x.jsx)(c.Z,{variant:"h2",className:"card-header",style:{fontSize:"0.9rem",marginBottom:22},children:"Traffic Sources"}),(0,x.jsx)(s.ZP,{container:!0,spacing:g.dv,sx:{overflow:"scroll",maxHeight:"21rem"},children:(0,j.map)(q,(e=>(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:1,children:[(0,x.jsx)(s.ZP,{item:!0,sm:!0,zeroMinWidth:!0,children:(0,x.jsx)(c.Z,{variant:"body2",children:null===e||void 0===e?void 0:e.name})}),(0,x.jsx)(s.ZP,{item:!0,children:(0,x.jsxs)(c.Z,{variant:"body2",align:"right",children:[(0,j.round)((null===e||void 0===e?void 0:e.count)/(0,j.sumBy)(q,"count")*100,1),"%"]})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(u.Z,{variant:"determinate","aria-label":"direct",value:null===e||void 0===e?void 0:e.count,color:"primary"})})]})})))})]})})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:8,children:(0,x.jsx)(r.Z,{children:(0,x.jsx)(d.Z,{children:(0,x.jsxs)(s.ZP,{container:!0,spacing:2,sx:{display:"flex",alignItems:"center"},children:[(0,x.jsxs)(s.ZP,{item:!0,xs:12,md:7,children:[(0,x.jsx)(c.Z,{variant:"h2",className:"card-header",style:{fontSize:"0.9rem"},children:"Assignee Count"}),(0,x.jsx)(b,{data:null!==(M=J[0])&&void 0!==M&&M.assignedToByStatus?null===JSON||void 0===JSON?void 0:JSON.parse(null===(T=J[0])||void 0===T?void 0:T.assignedToByStatus):[]})]}),(0,x.jsx)(s.ZP,{item:!0,xs:12,md:5,children:(0,x.jsx)(S,{label:X,value:$})})]})})})})]})]})})}}}]);
//# sourceMappingURL=98.0fdcb037.chunk.js.map